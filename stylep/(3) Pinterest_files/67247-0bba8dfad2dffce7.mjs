(self.modernJsonp=self.modernJsonp||[]).push([["67247"],{366199(e,n,t){t.d(n,{$S:()=>r,IX:()=>m,ak:()=>d,d2:()=>o,j5:()=>l});var i=t(668742),a=t(1807);let r=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,o=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,s=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.poster||null;let n=(e.style||{}).backgroundImage||"";if(!n.startsWith("url(")||!n.endsWith(")"))return null;let t=n.slice(4,-1);return(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))&&(t=t.slice(1,-1)),t||null},l=()=>document.querySelector?document.querySelectorAll(i.t$).length:((0,a.vV)("missing_document_query_selector"),0),d=()=>{let e=(()=>{if(!document.querySelector)return(0,a.vV)("missing_document_query_selector"),null;let e=document.querySelectorAll(i.t$);return e[e.length-1]||null})();if(!e)return!1;let n=window.innerHeight||0,t=window.pageYOffset||0;return e.getBoundingClientRect().top+t>=n},m=(e,n,t)=>{if(!document.querySelector)return(0,a.vV)("missing_document_query_selector"),[];let r={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},l=[i.os,...e?[i.x_]:[],...n?[i.Sc]:[]].join(","),d=[...document.querySelectorAll(l)];if(t){let e=[...document.querySelectorAll('div[data-test-id="board-section"]')],n=e=>{let t=[...e.children];!t.length&&e.style.backgroundImage?d.push(e):t.length&&t.forEach(e=>{n(e)})};e.forEach(e=>{n(e)})}return d.reduce((e,t)=>{if((t instanceof HTMLImageElement||t instanceof HTMLDivElement||t instanceof HTMLVideoElement&&n)&&((e,n)=>{let t=o(e);if(!t)return(0,a.vV)("missing_client_rect"),!1;if(t.width<70&&t.height<70){if(e instanceof HTMLImageElement)return!1;let n=s(e);if(n?.endsWith("svg"))return!1}return(({top:e,height:n},{foldY:t,pageYOffset:i})=>{let a=e+i;if(a>=t)return!1;let r=Math.min(n,t-a);return r>.5*n||r>.2*t})(t,n)})(t,r)){let n=s(t);if(n){let i=n.lastIndexOf("/"),a=i>=0?n.slice(i+1):n,r=a.indexOf("?"),o=r>=0?a.slice(0,r):a;return e.concat([{element:t,fileName:o}])}}return e},[])}},668742(e,n,t){t.d(n,{Sc:()=>l,lH:()=>i,os:()=>o,t$:()=>r,x_:()=>s});let i="pwt-grid-item",a=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${i}"]`],r=a.join(","),o=a.map(e=>`${e} img`).join(","),s=a.map(e=>`${e} div[style*=background-image]`).join(","),l=a.map(e=>`${e} video`).join(",")},150194(e,n,t){t.d(n,{A:()=>f,c:()=>E});var i=t(859471),a=t(17775),r=t(366199),o=t(982279),s=t(910128),l=t(186707),d=t(662594),m=t(441496),u=t(205392),_=t(449344),c=t(952402),g=t(81920);let p=(0,a.lo)("GridProfiler"),E=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,r.$S)();function f({isAtEndOfFeed:e,pinData:n,includeBackgroundImages:t,includeVideos:E=!1,includeSections:f,isPlaceholderGrid:v,onVisuallyCompletePinCount:A,stopwatchSetVisuallyCompleteResult:h,stopwatchContext:w}){let I=(0,_.lj)(),[R,T]=(0,i.useState)({status:"DISABLED"});(0,i.useEffect)(()=>{T({status:"LAYOUT",failedCount:0,numOfItemsChecked:0})},[I]),(0,i.useEffect)(()=>{if(p("new status",R),"LAYOUT"===R.status){var e,n;let t,i=(e="scroll",n=()=>{(0,l.A)("scrollDuringLayout")},t=()=>{window.removeEventListener(e,t),n()},window.addEventListener(e,t),()=>window.removeEventListener(e,t));return()=>{i()}}return()=>{}},[R.status]),(0,c.A)(()=>{let i=(0,_.R$)(),l=()=>{},c=e=>{(0,s.A)(e),w&&w?.abort(),h&&h({result:"ABORT"})};"unknown"!==i?l=u.tL:(i=`${w?.name}`,w?.addBinaryAnnotation&&(l=w?.addBinaryAnnotation));let I=(0,r.IX)(t,E,f);if(v)return void p("bypassing PWT run due to skeleton pin grid");switch(R.status){case"LAYOUT":{let n=((e,n)=>{if(!n){let n=(0,r.j5)();if(n===e)return p("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,r.ak)())return p("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:n}}return{complete:!0}})(R.numOfItemsChecked,e);n.complete?T({status:"TIMING",failedCount:0,pinElements:I}):500*R.failedCount>6e4?((0,m.pI)({eventName:`images.${i}.visuallyComplete.maxLayoutAttempt`}),c("visuallyComplete_layoutTimeout"),T({status:"DISABLED"})):T({...R,failedCount:R.failedCount+1,numOfItemsChecked:n.numOfItemsChecked});break}case"TIMING":{let e=(0,o.Fm)(),t=R.pinElements.length,r=[],s=0,u=0,_=0,E=1/0,f=0;if(R.pinElements.forEach(({element:n,fileName:t})=>{let i=e.find(e=>e.name.endsWith(t));i?i.responseEnd?(r.push(i),(0,a.Gp)(n,"green"),E=Math.min(E,i.requestStart),f=Math.max(f,i.responseEnd)):(_+=1,(0,a.Gp)(n,"blue")):n instanceof HTMLImageElement&&n.complete?(u+=1,(0,a.Gp)(n,"red")):(s+=1,(0,a.Gp)(n,"greenyellow"))}),s||_)100*R.failedCount>6e4?((0,m.pI)({eventName:`images.${i}.visuallyComplete.maxAttempt`,tags:{totalImageCount:t,incompleteCount:s,noTimingCount:u,noTimingResponseEndCount:_}}),c("visuallyComplete_timingTimeout"),T({status:"DISABLED"})):T({...R,failedCount:R.failedCount+1});else{if(p(`All ${r.length} images are fetched`),A?.(t),n&&n.length){var N,L;let e,t,a,r,o,s=(N=n,L=R.pinElements,e=0,t=0,a=0,r=0,o=0,N=N.filter(e=>"pin"===e.type),L.forEach((n,i)=>{let s,l=n.fileName.split(".")[0];s=N[i],l!==s?.image_signature&&(s=N.find(e=>l===e?.image_signature)),void 0===s?o+=1:s.is_promoted||s.recommendation_reason?.reason==="PROMOTED_PIN"||s?.promoter?a+=1:null!==s.story_pin_data_id&&void 0!==s.story_pin_data_id?e+=1:s?.videos?.video_list?t+=1:r+=1}),{storyPinCount:e,videoCount:t,adCount:a,imageCount:r,unknownCount:o});if(Object.entries(s).forEach(([e,n])=>{l(e,n,"I16"),(0,d.kN)(e,n,"I16")}),(0,m.pI)({eventName:`${i}.pinTypes`,tags:s}),"SEARCH_FEED_RENDER"===i){let e=f-E;n[0].display_options?.num_columns_requested===0?(0,g.N9)("full_width_story_image_fetch_time_true",e,{sampleRate:1}):(0,g.N9)("full_width_story_image_fetch_time_false",e,{sampleRate:.05})}}(({imageTimings:e})=>{h&&h({result:"COMPLETE"}),(0,d.Cf)(e)})({imageTimings:r}),T({status:"DISABLED"}),(0,m.pI)({eventName:`images.${i}.visuallyComplete.complete`,tags:{totalImageCount:t,noTimingCount:u}}),(0,m.AJ)({eventName:`images.${i}.visuallyComplete.timing`,value:Math.round(f)})}}}},"LAYOUT"===R.status&&500||"TIMING"===R.status&&100||null)}},910128(e,n,t){t.d(n,{A:()=>d});var i=t(961105),a=t(472723),r=t(752643),o=t(441496),s=t(449344),l=t(2354);function d(e){if(!(0,r.A)())return;let n=(0,s.mw)();if(n){let t=[...(0,s.e0)(),...n.annotateExperiments||[]],r=(0,s.uS)();(0,o.HF)({abortReason:e,pwtName:n.name,annotateExperiments:t}),r.forEach(e=>{(0,o.SR)(e,n?.name)});let d=(0,l.tQ)(),m={type:"surface",surface:n.name,id:n.id,navigationType:(0,s.Fg)(),isAuthenticated:d.isAuthenticated},u=(0,i.R)({reason:e,annotateExperiments:t,annotations:{},binaryAnnotations:(0,s.EZ)(),constraintMap:(0,s.Qh)(),endTime:performance.now(),imageTimings:(0,s.XA)(),isV4Logger:!0,metricId:m,pwtMeasures:(0,s.vs)(),pwtStaticContext:d,startTime:(0,s.Wj)(),traceId:(0,s.v5)(),spans:[]});(0,o.cY)(`Abort ${n.name} PWT. Abort reason: ${e}`),(0,o.cY)("Result:",u),(0,a.A)({metricId:m,pwtStaticContext:d,result:u,isV4Logger:!0,annotateExperiments:t}),(0,s.sq)()}}},69054(e,n,t){t.d(n,{A:()=>o});var i=t(2354);let a=!1,r=null;function o(e){if(a)return;r=e;let n=window.innerHeight,t=window.innerWidth,o=()=>{let e=(0,i.tQ)(),s=Math.abs(window.innerHeight-n),l=window.innerHeight!==n,d=window.innerWidth!==t;if("phone"===e.deviceType&&(!d&&l&&s<=150||!l&&!d)||"desktop"===e.deviceType&&!l&&!d){window.removeEventListener("resize",o),a=!1;return}r?.("windowResized"),window.removeEventListener("resize",o),a=!1};window.addEventListener("resize",o),a=!0}},876717(e,n,t){t.d(n,{A:()=>o});var i=t(752643),a=t(441496),r=t(449344);function o(e,n,t){let o;if((0,i.A)()){switch(t){case"BOOL":o={type:"BOOL",value:"boolean"==typeof n?n:null};break;case"STRING":o={type:"STRING",value:"string"==typeof n?n:null};break;case"I16":case"I32":case"I64":o={type:t,value:"number"==typeof n?n:null};break;default:(0,a.cY)("Invalid binary annotation type");return}if(null===o.value)return void(0,a.cY)("Invalid binary annotation value");(0,r.Oh)(e,o),(0,a.cY)(`Add binary annotation: { ${e}: ${o.value} }`)}}},345080(e,n,t){t.d(n,{A:()=>l});var i=t(752643),a=t(441496),r=t(449344),o=t(122555),s=t(639650);function l(e,n){if(!(0,i.A)())return;let t=(0,r.mw)();if(t){let i=(0,r.uS)(),l=i.indexOf(e);l>-1&&((0,r.qu)()<n&&(0,r.yg)(n),(0,r.$I)(e,n),(0,a.Nr)(i[l],t?.name),(0,a.AJ)({eventName:`${t?.name}.constraint.${e}`,value:n}),(0,a.AJ)({eventName:`constraint.${e}`,value:n,tags:{handler:(0,s.q)()}}),(0,a.cY)(`Complete constraint: ${e} at ${Math.floor(n)}ms`),(0,o.A)(e))}else{let t=(0,r.HX)();t[e]||(t[e]=n)}}},842870(e,n,t){t.d(n,{A:()=>d,W:()=>m});let i=[{handler:"analytics/overview.js",config:{dWeb:{auth:{initialPageLoad:{name:"ANALYTICS_OVERVIEW_PAGELOAD",id:null,constraints:["toplineMetricsRendered","performanceGraphRendered","conversionInsightsModuleRendered"]},clientNavigation:{name:"ANALYTICS_OVERVIEW_USER_NAV",id:null,constraints:["toplineMetricsRendered","performanceGraphRendered","conversionInsightsModuleRendered"]}}}}},{handler:"analytics/conversion-insights.js",config:{dWeb:{auth:{initialPageLoad:{name:"ANALYTICS_CONVERSION_INSIGHTS_PAGELOAD",id:null,constraints:["conversionToplineRendered","conversionFunnelRendered","conversionPerformanceGraphRendered"]},clientNavigation:{name:"ANALYTICS_CONVERSION_INSIGHTS_USER_NAV",id:null,constraints:["conversionToplineRendered","conversionFunnelRendered","conversionPerformanceGraphRendered"]}}}}}],a=[{handler:"sterling/advertiser/[advertiserId]/audiences.js",config:{dWeb:{auth:{clientNavigation:{name:"STERLING_AUDIENCES_PAGE_USER_NAV",id:224,constraints:["NavigationCompletev4","audiencesTableRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/ads/edit.js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_ADSEDIT_MAIN_PAGELOAD",id:204,constraints:["NavigationCompletev4","editFlowRendered"]},clientNavigation:{name:"STERLING_EDIT_FLOW_USER_NAV",id:225,constraints:["NavigationCompletev4","editFlowRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/ads/create.js","sterling/advertiser/[advertiserId]/ads/duplicate.js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_ADSCREATE_MAIN_PAGELOAD",id:204,constraints:["NavigationCompletev4","createFlowRendered"]},clientNavigation:{name:"STERLING_ADSCREATE_USER_NAV",id:233,constraints:["NavigationCompletev4","createFlowRendered"]}}}}},{handler:"sterling/advertiser/[advertiserId]/reporting/[entityType].js",config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_REPORTING_DETAILS_PAGELOAD",id:218,constraints:["NavigationCompletev4","reportingTableRendered","reportingMetricsGraphDataFetched"]},clientNavigation:{name:"STERLING_REPORTING_DETAILS_USER_NAV",id:227,constraints:["NavigationCompletev4","reportingTableRendered","reportingMetricsGraphDataFetched"]}}}}},{handler:"sterling/advertiser/[advertiserId].js",config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_REPORTING_OVERVIEW_PAGELOAD",id:219,constraints:["NavigationCompletev4","activeCampaignsTableRendered","accountActivityRendered"]},clientNavigation:{name:"STERLING_REPORTING_OVERVIEW_USER_NAV",id:226,constraints:["NavigationCompletev4","activeCampaignsTableRendered","accountActivityRendered"]}}}}},{handler:["sterling/advertiser/[advertiserId]/bulk_editor/[page].js"],config:{dWeb:{auth:{initialPageLoad:{name:"STERLING_BULKEDITOR_HISTORY_PAGELOAD",id:231,constraints:["NavigationCompletev4","bulkHistoryRendered"]},clientNavigation:{name:"STERLING_BULKEDITOR_HISTORY_USER_NAV",id:232,constraints:["NavigationCompletev4","bulkHistoryRendered"]}}}}}],r=[{handler:["www/pin/[id]/sent.js","www/pin/[id].js"],config:{mWeb:{unauth:{initialPageLoad:{name:"PIN_PAGE_INTERACTIVE",id:113,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"],annotateExperiments:["mweb_perf_pin_page_interactive_pwt_regression_analysis"]},clientNavigation:{name:"client_route_push_unauth_pin",id:null,constraints:["PinPageMainImageRendered"]}},auth:{initialPageLoad:{name:"initial_page_load_auth_pin",id:null,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"],annotateExperiments:["auth_mweb_graphql_pin_page"]},clientNavigation:{name:"PIN_CLOSEUP_DETAILS",id:13,constraints:["PinPageMainImageRendered"],annotateExperiments:["auth_mweb_graphql_pin_page","closeup_dweb_side_by_side_redesign_fast_follow"]}}},dWeb:{unauth:{initialPageLoad:{name:"PIN_PAGE_INTERACTIVE",id:113,constraints:["ReduxStoreInitialized","PinPageMainImageRendered"],annotateExperiments:["dweb_perf_pin_page_interactive_pwt_regression_analysis"]},clientNavigation:{name:"client_route_push_unauth_pin",id:null,constraints:["PinPageMainImageRendered"]}},auth:{initialPageLoad:{name:"initial_page_load_auth_pin",id:null,constraints:["ReduxStoreInitialized","image","resource","button"],segments:{product_detail_page:{name:"PRODUCT_DETAILS_INTERACTIVE"},product_detail_page_plus:{name:"PRODUCT_DETAILS_PLUS_INTERACTIVE"}}},clientNavigation:{name:"PIN_CLOSEUP_DETAILS",id:13,constraints:["button","image","resource"],segments:{story_pin:{name:"STORY_PIN_CLOSEUP",constraints:["button","resource","image","video"]},product_detail_page:{name:"PRODUCT_DETAILS_RENDER",constraints:["button","description","image","shopButton","thumbnailsLoaded"]},product_detail_page_plus:{name:"PRODUCT_DETAILS_PLUS_RENDER",constraints:["button","description","image","shopButton","thumbnailsLoaded"]}}}}}}},{handler:["www/index.js","www/homefeed.js"],config:{mWeb:{unauth:{initialPageLoad:{name:"INITIAL_PAGE_LOAD_UNAUTH_MWEB_INDEX_JS",id:131,constraints:["ReduxStoreInitialized","ContinueWithEmailButtonRendered"],annotateExperiments:["phase2_mweb_unauth_homepage_redesign"]}},auth:{initialPageLoad:{name:"HOME_FEED_PINTERACTIVE",id:19,constraints:["ReduxStoreInitialized","VisuallyComplete"],annotateExperiments:["web_sw_with_early_hydration","web_install_sw_on_unauth_landing","web_sw_early_registration","mweb_sw_without_workbox"]},clientNavigation:{name:"HOME_FEED_RENDER",id:2,constraints:["VisuallyComplete"]}}},dWeb:{unauth:{initialPageLoad:{name:"INITIAL_PAGE_LOAD_UNAUTH_DWEB_INDEX_JS",id:132,constraints:["ReduxStoreInitialized","SignupLoginButtonsRendered"],annotateExperiments:["phase2_mweb_unauth_homepage_redesign"]}},auth:{initialPageLoad:{name:"HOME_FEED_PINTERACTIVE",id:19,constraints:["ReduxStoreInitialized","VisuallyComplete"],annotateExperiments:["web_sw_with_early_hydration","web_install_sw_on_unauth_landing","web_sw_early_registration"]},clientNavigation:{name:"HOME_FEED_RENDER",id:2,constraints:["VisuallyComplete"]}}}}},{handler:"www/search/[scope].js",config:{unified:{auth:{clientNavigation:{name:"SEARCH_FEED_RENDER",id:3,constraints:["VisuallyComplete"]}}}}},{handler:"www/search.js",config:{mWeb:{auth:{clientNavigation:{name:"SEARCH_TAB_RENDER",id:25,constraints:["RenderSearchLandingPageBubbles"]}}}}},{handler:"www/[username]/[slug].js",config:{unified:{unauth:{initialPageLoad:{name:"BOARD_PAGE_INTERACTIVE",id:114,constraints:["ReduxStoreInitialized","VisuallyComplete"]}},auth:{initialPageLoad:{name:"initial_app_load_auth_board",id:null,constraints:["ReduxStoreInitialized","VisuallyComplete"]},clientNavigation:{name:"client_route_push_auth_board",id:null,constraints:["VisuallyComplete"]}}}}},{handler:"www/for-you/[boardId].js",config:{unified:{auth:{initialPageLoad:{name:"AUTOMAGICAL_BOARD_PAGE_INTERACTIVE",id:129,constraints:["ReduxStoreInitialized","VisuallyComplete"]}}}}},{handler:"www/ideas/[interest]/[id].js",config:{unified:{unauth:{initialPageLoad:{name:"TOPIC_PAGE_INTERACTIVE",id:119,constraints:["ReduxStoreInitialized","idea_module_loaded"]}}}}},{handler:"www/business/hub.js",config:{dWeb:{auth:{initialPageLoad:{name:"BIZHUB_PINTERACTIVE",id:607,constraints:["ReduxStoreInitialized"]},clientNavigation:{name:"BIZHUB_PAGE_RENDER",id:608,constraints:["NavigationCompletev4"]}}}}},{handler:"www/pin/[id]/visual-search.js",config:{dWeb:{auth:{initialPageLoad:{name:"VISUAL_SEARCH_PAGE_RENDER",id:44,constraints:["VisualSearchImageRender","VisualSearchFeedRender"]},clientNavigation:{name:"VISUAL_SEARCH_PAGE_RENDER",id:44,constraints:["VisualSearchImageRender","VisualSearchFeedRender"]}}}}},{handler:["www/[username].js","www/[username]/_boards.js","www/[username]/_created.js","www/[username]/_saved.js","www/[username]/_pins.js","www/[username]/_profile.js"],config:{unified:{auth:{initialPageLoad:{name:"OTHER_PROFILE_PAGE_LOAD",id:122,constraints:["ReduxStoreInitialized","VisuallyComplete"],segments:{self_profile:{name:"SELF_PROFILE_PAGE_LOAD"},other_profile_no_pins:{name:"OTHER_PROFILE_NO_PINS_PAGE_LOAD"},own_profile_no_pins:{name:"OWN_PROFILE_NO_PINS_PAGE_LOAD"},own_profile:{name:"OWN_PROFILE_PAGE_LOAD"}}},clientNavigation:{name:"OTHER_PROFILE",id:15,constraints:["VisuallyComplete"],segments:{self_profile:{name:"SELF_PROFILE"},own_profile:{name:"OWN_PROFILE"},own_profile_no_pins:{name:"OWN_PROFILE_NO_PINS"},other_profile_no_pins:{name:"OTHER_PROFILE_NO_PINS"}}}},unauth:{initialPageLoad:{name:"USER_PAGE_INTERACTIVE",id:115,constraints:["ReduxStoreInitialized","VisuallyComplete"]}}}}},{handler:"www/business/catalogs/[catalog_id]/data-sources.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_DATA_SOURCES_USER_NAV",id:228,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/product-groups.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_PRODUCT_GROUPS_USER_NAV",id:229,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/listings.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_LISTINGS_USER_NAV",id:230,constraints:["NavigationCompletev4"]}}}}},{handler:"www/business/catalogs/[catalog_id]/products.js",config:{dWeb:{auth:{clientNavigation:{name:"MERCHANT_CATALOGS_LISTINGS_USER_NAV",id:230,constraints:["NavigationCompletev4"]}}}}},{handler:"www/collage-creation-tool.js",config:{dWeb:{auth:{initialPageLoad:{name:"COLLAGE_CREATION_PAGE_LOAD",id:130,constraints:["ReduxStoreInitialized","VisuallyComplete"]},clientNavigation:{name:"COLLAGE_CREATION_USER_NAV",id:53,constraints:["VisuallyComplete"]}}}}}];var o=t(441496),s=t(639650);let l=[...r,...a,...i];function d({isAuthenticated:e,isInitialPageLoad:n,isMobile:t}){let i=(0,s.q)(),a=l.find(e=>Array.isArray(e.handler)?e.handler.includes(i):i===e.handler),r=a?.config,d=r?.unified;if(d||(d=t?r?.mWeb:r?.dWeb),d){let t=e?d.auth:d.unauth;if(t){if(n&&t.initialPageLoad)return(0,o.cY)("Found isInitialPageLoad config"),(0,o.cY)(t.initialPageLoad),{...t.initialPageLoad};else if(!n&&t.clientNavigation)return(0,o.cY)("Found clientNavigation config"),(0,o.cY)(t.clientNavigation),{...t.clientNavigation}}}return(0,o.cY)(`No config found for ${i} :(`),null}let m=({isAuthenticated:e,isInitialPageLoad:n,isMobile:t,segment:i})=>{let a=d({isAuthenticated:e,isInitialPageLoad:n,isMobile:t});return("DEFAULT"===i?a?.name:a?.segments?.[i]?.name)??null}},662594(e,n,t){t.d(n,{sq:()=>f,aA:()=>v,Ay:()=>w,kF:()=>h,kN:()=>o.A,Cf:()=>A});var i=t(910128),a=t(445205),r=t(69054),o=t(876717),s=t(186707),l=t(504452),d=t(752643),m=t(345080),u=t(842870),_=t(441496),c=t(93139),g=t(449344),p=t(122555),E=t(2354);function f(){(0,_.cY)("Reset PWT configs"),(0,g.sq)(),(0,c.vz)()}function v(e){if(!(0,d.A)())return;let n=(0,g.mw)(),t=(0,g.uS)();n?((0,_.S2)(e,n.name),t.includes(e)||((0,g.XX)(e),(0,_.cY)(`Add constraint: ${e}`))):(0,_.J6)({errorName:"add_constraint_while_no_PWT_in_progress",errorDetailsTag:e})}function A(e){if(!(0,d.A)())return;let n=(0,g.mw)(),t=(0,g.uS)();if(n&&t.includes("VisuallyComplete"))if((0,_.cY)("Set visually complete result"),(0,_.cY)("Image resource timings: ",e),(0,g.R9)(e),0===e.length)(0,i.A)("visuallyComplete_noImages");else{let n=Math.max(...e.map(e=>e.responseEnd||0));performance.mark("complete_constraint__VisuallyComplete",{startTime:n}),(0,l.A)("constraint__VisuallyComplete",(0,g.Wj)(),n)}}function h(e){if(!(0,d.A)())return;let n=(0,g.mw)(),t=(0,g.e0)(),i=(0,g.Fg)();if(n&&n.name.toLowerCase()!==e.toLowerCase()){let a=[...t,...n.annotateExperiments||[]],{isAuthenticated:r,deviceType:o}=(0,E.tQ)(),s=(0,u.W)({isAuthenticated:r,isInitialPageLoad:"initial_app_load"===i,isMobile:"phone"===o,segment:e});if(!s){(0,_.cY)(`Segment action name not found for segment: ${e}`),(0,_.J6)({errorName:"segment_action_name_not_found",errorDetailsTag:e});return}(0,_.HF)({abortReason:"segmentChange",pwtName:n.name,annotateExperiments:a});let{segments:l,constraints:d}=n,m=l?.[e],c=m?.constraints;if(c){let e=new Set(c),n=new Set(d);[...(0,g.uS)()].forEach(n=>{e.has(n)||(0,p.A)(n)}),c.forEach(e=>{n.has(e)||v(e)}),(0,g.nz)(e)}n.name=s,(0,_.cY)(`Set segment to ${e}. PWT action name: ${s}`),(0,_.Lc)({pwtName:n.name,annotateExperiments:[...t,...n.annotateExperiments||[]]})}else(0,_.J6)({errorName:"set_segment_while_no_PWT_in_progress",errorDetailsTag:e})}function w({requestContext:e}){try{var n;if(!(0,d.A)())return void(0,_.pI)({eventName:"unsupportedPWTBrowser"});(0,_.pI)({eventName:"supportedPWTBrowser"}),"function"==typeof performance?.setResourceTimingBufferSize&&e.experimentsClient?.checkExperiment("web_pwt_grid_profiler_v2")?.anyEnabled&&performance.setResourceTimingBufferSize(500),(0,r.A)(i.A),n=i.A,a.A.onSessionPause(()=>n("sessionPaused"));let t=new PerformanceObserver(e=>{e&&e.getEntries&&e.getEntries().forEach(e=>{if(e&&e.name&&!e.name.startsWith("--")){if(e.name.includes("complete_constraint__"))(0,m.A)(e.name.split("complete_constraint__")[1]||"",e.startTime);else if(e.name.startsWith("pwt__")){let n=e.name.slice(5);(0,c.Wg)()[n]||(0,c.ht)(n,{name:n,entryType:e.entryType,startTime:e.startTime,duration:e.duration})}}})});t.observe&&t.observe({type:"mark",buffered:!0});let o=new PerformanceObserver(e=>{e&&e.getEntries&&e.getEntries().forEach(e=>{if(e&&e.name&&!e.name.startsWith("--")){let n=(0,g.vs)();if(e.name.startsWith("pwt__")){let t=e.name.slice(5);n[t]||(n[t]={name:t,entryType:e.entryType,startTime:e.startTime,duration:e.duration})}}})});o.observe&&o.observe({type:"measure",buffered:!0});let u=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{let{rtt:n}=window.navigator.connection||{};if(n&&"number"==typeof n){let t=e.responseEnd-n/2;t>0&&(0,s.A)("client_chunkEndTime",t)}(0,l.A)("dom_complete",e.startTime,e.domComplete),(0,l.A)("dom_interactive",e.startTime,e.domInteractive),(0,l.A)("dom_content_loaded_event_end",e.startTime,e.domContentLoadedEventEnd),(0,l.A)("load_event_end",e.startTime,e.loadEventEnd),(0,l.A)("response_start",e.startTime,e.responseStart),(0,l.A)("response_duration",e.responseStart,e.responseEnd)})});u.observe&&u.observe({type:"navigation",buffered:!0});let p=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{!(0,g.YH)()[e.identifier]&&((0,g.$G)(e.identifier,e),(e.identifier.includes("MainPinImage")||e.identifier.includes("closeupImage"))&&((0,l.A)(`element_timing_${e.identifier}`,0,e.renderTime),(0,s.A)(`element_timing_${e.identifier}`,e.renderTime)))})});p.observe({type:"element",buffered:!0}),window.addEventListener("beforeunload",()=>{t.disconnect(),o.disconnect(),u.disconnect(),p.disconnect()})}catch(e){(0,_.J6)({errorName:e instanceof Error?e.message:String(e)})}(0,g.Yp)(e.experimentsClient?.checkExperiment("web_log_generic_feed_pwt")?.anyEnabled??!1)}},205392(e,n,t){t.d(n,{$Q:()=>c,JT:()=>g,Qj:()=>_,Uy:()=>u,oV:()=>p,tL:()=>E});var i=t(859471),a=t(910128),r=t(876717),o=t(504452),s=t(752643),l=t(662594),d=t(449344),m=t(122555);let u=(e,n)=>{(0,s.A)()&&(n?performance.mark(`complete_constraint__${e}`,{startTime:n}):performance.mark(`complete_constraint__${e}`),(0,o.A)(`constraint__${e}`,(0,d.Wj)(),n??performance.now()))},_=e=>{(0,a.A)(e)},c=e=>{(0,m.A)(e)},g=e=>{(0,l.kF)(e)},p=e=>{(0,i.useEffect)(()=>{(0,l.kF)(e)},[e])},E=(e,n,t)=>{(0,r.A)(e,n,t)}},122555(e,n,t){t.d(n,{A:()=>g});var i=t(676692),a=t(961105),r=t(472723),o=t(54240),s=t(876717),l=t(752643),d=t(441496),m=t(93139),u=t(449344),_=t(2354),c=t(639650);function g(e){if(!(0,l.A)())return;let n=(0,u.mw)();if(n){let t=(0,u.uS)().indexOf(e);if(t>-1){if((0,u.PX)(t),(0,d.cY)(`Remove constraint: ${e}. Remaining constraints: [${(0,u.uS)().join(", ")}]`),0===(0,u.uS)().length){let e=(0,u.qu)(),t=(0,u.Wj)(),l=e-t,g=[...(0,u.e0)(),...n.annotateExperiments||[]];(0,d.ed)({pwtName:n.name,annotateExperiments:g}),(0,d.AJ)({eventName:n.name,value:l}),(0,d.AJ)({eventName:"complete",value:l,tags:{handler:(0,c.q)()}});let p=(0,_.tQ)(),E=(0,u.EZ)();if((0,u.OW)()&&(48===n.id||"FEED_RENDER"===n.name)){let e=(0,i.Cs)(),n=e?.viewType,t=e?.viewParameter;null==n||void 0===n||E["view.type"]||(0,s.A)("view.type",n,"I32"),null==t||void 0===t||E["view.parameter"]||(0,s.A)("view.parameter",t,"I32")}let f={type:"surface",surface:n.name,id:n.id,navigationType:(0,u.Fg)(),isAuthenticated:p.isAuthenticated},v=(0,u.v5)(),A=(0,a.I)({annotateExperiments:g,annotations:{},binaryAnnotations:(0,u.EZ)(),constraintMap:(0,u.Qh)(),endTime:e,imageTimings:(0,u.XA)(),isV4Logger:!0,metricId:f,pwtMeasures:(0,u.vs)(),pwtStaticContext:p,startTime:t,traceId:v,spans:[{name:`Report_PWT_Complete_${n.name}`,startTime:t,endTime:e,annotationMap:{},binaryAnnotationMap:{},id:(0,o.A)(),parentId:v}]});(0,d.cY)(`All constraints complete. ${n.name} PWT completed at ${Math.floor(e)}ms. PWT duration: ${Math.floor(l)}ms`),(0,d.cY)("Result:",A),(0,r.A)({metricId:f,pwtStaticContext:p,result:A,isV4Logger:!0,annotateExperiments:g}),(0,u.sq)(),(0,m.vz)()}}else(0,d.J6)({errorName:"constraint_completed_not_in_PWT_constraint_list",pwtName:n.name,errorDetailsTag:e})}else(0,d.J6)({errorName:"remove_constraint_while_no_PWT_in_progress",errorDetailsTag:e}),(0,u.vp)(e)}},952402(e,n,t){t.d(n,{A:()=>a});var i=t(859471);let a=(e,n)=>{let t=(0,i.useRef)(()=>{});(0,i.useEffect)(()=>{t.current=e},[e]),(0,i.useEffect)(()=>{if(null===n)return()=>{};let e=setInterval(()=>t.current(),n);return()=>clearInterval(e)},[n])}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/67247-0bba8dfad2dffce7.mjs.map