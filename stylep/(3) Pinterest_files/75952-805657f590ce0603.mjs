(self.modernJsonp=self.modernJsonp||[]).push([["75952"],{288361(e,t,a){var i,n;a.r(t),a.d(t,{default:()=>s});let l={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"userDidItData"}],kind:"Fragment",metadata:null,name:"CommentThreadContainerLikeMutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"userDidItData",variableName:"userDidItData"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3LikeUserDidItDataMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"CommentThreadContainerLikeMutation",selections:n},params:{id:"0e45555e33d7c8c17de577cb4e5213ff3568b1b3f3e6694041407c0dad67674d",metadata:{},name:"CommentThreadContainerLikeMutation",operationKind:"mutation",text:null}};l.hash="6abad0b1546231dd9301ca5510fb88f5";let s=l},677854(e,t,a){var i,n;a.r(t),a.d(t,{default:()=>s});let l={fragment:{argumentDefinitions:i=[{defaultValue:null,kind:"LocalArgument",name:"userDidItData"}],kind:"Fragment",metadata:null,name:"CommentThreadContainerUnLikeMutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"userDidItData",variableName:"userDidItData"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3UnlikeUserDidItDataMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"CommentThreadContainerUnLikeMutation",selections:n},params:{id:"8f06f078d5b50aa7a3b5e86afda41af9f9ff89d14d2620f3f830abe11ce26f6e",metadata:{},name:"CommentThreadContainerUnLikeMutation",operationKind:"mutation",text:null}};l.hash="e8e5a11ac4f4d2e8c4a2ed9c7ee3c073";let s=l},336957(e,t,a){var i,n;a.r(t),a.d(t,{default:()=>s});let l=(n=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="38e173ab2c3107ebc5b3da9f216fac98";let s=l},246632(e,t,a){var i,n,l,s;a.r(t),a.d(t,{default:()=>o});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DescriptionWithLinksAndMentions_pin",selections:[{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"descriptionLinks",plural:!0,selections:[i={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"objectId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"userMentionTags",plural:!0,selections:[i,n,l,s],storageKey:null}],type:"Pin",abstractKey:null};r.hash="77396be9e54491e35d44dc059d7664fc";let o=r},466912(e,t,a){var i,n,l,s,r;a.r(t),a.d(t,{default:()=>d});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualContext_pin",selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:s=[{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:s,storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtype",storageKey:null}],storageKey:null},{alias:"images_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[l,i,n],storageKey:'images(spec:"564x")'},{alias:"images_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"736x")'},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"orig")'},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"474x")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"236x")'},{alias:"images_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"1200x")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVideo",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetMainPinImage_pin"}],type:"Pin",abstractKey:null};o.hash="08cd44e128b47bb7c9b6b57bde25cae7";let d=o},637349(e,t,a){var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetMainPinImage_pin",selections:[{alias:"images_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"images_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"images_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:"images_1200x",args:[{kind:"Literal",name:"spec",value:"1200x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"1200x")'}],type:"Pin",abstractKey:null};n.hash="bd2991a5190c2f6977d6f49024eb3318";let l=n},131463(e,t,a){a.d(t,{A:()=>l});var i=a(859471);let n="u">typeof document?document:void 0,l=()=>{let e=(0,i.useRef)(void 0),t=n?.documentElement,a=n?.body;return t?[()=>{if(!a||!a.style||e.current)return;let i=window.innerWidth-t.clientWidth,n=parseInt(window.getComputedStyle(a).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",a.style.position="relative",a.style.overflow="hidden",a.style.paddingRight=`${n+i}px`,e.current=!0},()=>{a&&a.style&&e.current&&(t.style.position="",t.style.overflow="",a.style.position="",a.style.overflow="",a.style.paddingRight="",e.current=!1)}]:[]}},589244(e,t,a){a.d(t,{Bp:()=>s,C1:()=>P,C2:()=>u,EW:()=>_,Gy:()=>A,I3:()=>r,IP:()=>f,Is:()=>b,Jj:()=>h,KX:()=>k,M_:()=>w,S$:()=>l,TA:()=>L,VJ:()=>T,YX:()=>j,_K:()=>p,bL:()=>y,cH:()=>E,d1:()=>o,fM:()=>D,gU:()=>x,h4:()=>d,nT:()=>c,nc:()=>v,px:()=>m,qr:()=>S,uC:()=>I,wH:()=>g,z6:()=>C});var i=a(963522),n=a(995273);let l=170,s=4,r=5,o=232,d=539,c=9/16,m=72,u=236,g=94,_=400,p={__style:{fontWeight:500}},h=new i.rk(1),y=new i.K5([h]),f=new i.K5([h]),A=new i.K5([n.nH]),v=new i.K5([A]),T={MORE_IDEAS:"MORE_IDEAS",DRAFTS:"DRAFTS",SEARCH:"SEARCH",YOUR_BOARDS:"YOUR_BOARDS",BRAND_KIT:"BRAND_KIT"},E={0:"MORE_IDEAS",1:"YOUR_BOARDS",2:"DRAFTS",3:"SEARCH",4:"BRAND_KIT"},b={MORE_IDEAS:0,YOUR_BOARDS:1,DRAFTS:2,SEARCH:3,BRAND_KIT:4},x=420,I=264,C="#ffffff",L=5e3,k={PIN:1,TEXT:2,IMAGE:3},D={0:"left",1:"center",2:"right"},S={left:0,center:1,right:2},w={DRAWING:4},j=10,P=30},838880(e,t,a){a.d(t,{A:()=>s});var i=a(859471),n=a(652567),l=a(430705);function s({orbacSubjectId:e}={}){let t=(0,i.useMemo)(()=>({url:e?`/v3/users/${e}/shuffles/`:"/v3/users/me/shuffles/",data:{is_draft:!0,transform_to_pins:!1,fields:["shuffle.id","shuffle.images","shuffle.updated_at"],...e?{orbac_subject_id:e}:{}}}),[e]),{data:a,fetchMore:r,isFetching:o,refresh:d,isLoaded:c}=(0,l.A)({name:"ApiResource",options:t}),m=(0,n.dk)();return{fetchMore:r,isLoaded:c,invalidateDrafts:(0,i.useCallback)(()=>{m("ApiResource",t)},[m,t]),isFetching:o,shuffles:a,refresh:d}}},531265(e,t,a){a.d(t,{A:()=>u});var i=a(106386),n=a(427471),l=a(791117),s=a(152689),r=a(702970),o=a(513010),d=a(848991),c=a(504252);let m={[s.S.aggregatedComment]:"AggregatedCommentReplyResource",[s.S.pin]:"AggregatedCommentResource",[s.S.didIt]:"DidItCommentsResource"};function u(){let e=(0,i.wA)(),{aggregatedCommentCreated:t,updateCommentCount:a}=(0,l.Vc)();return async({commentMedia:i,force:l=!0,fromUnifiedComment:s,objectId:u,objectType:g,orbacSubjectId:_,pinId:p,replyToCommentId:h,tags:y,text:f})=>{let A=m[g],v={force:l,objectId:u,pinId:p,tags:y,text:f,replyToCommentId:h,..._?{orbacSubjectId:_}:{},...i?{commentMedia:i}:{}},T=c.A.AGGREGATED_COMMENTS;s&&(T="pin"===g?c.A.UNIFIED_COMMENTS:c.A.AGGREGATED_COMMENT_REPLIES);let E=await n.A.create(A,v).callCreate({showError:!1}),b=E.resource_response.data;return t(u,b),e((0,o.ZT)({feedType:T,feedId:u,itemIds:[b.id],itemType:b.type,prepend:!0})),"aggregatedComment"===g?a(u,1):"didIt"===g&&e((0,r.bh)(u,1)),p&&e((0,d.t)(p,1)),b.id||E}}},760596(e,t,a){a.d(t,{A:()=>r});var i=a(859471),n=a(985761),l=a(81920);class s extends i.PureComponent{constructor(...e){var t,a,i;super(...e),t="handleKeyDown",a=e=>{let{onClose:t,goToNext:a,goToPrevious:i}=this.props,s=e.keyCode||e.code;e.ctrlKey||e.metaKey||["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(s===n.A.LEFT?(e.preventDefault(),e.stopPropagation(),i&&i(),(0,l.GV)("web_keydown_left")):s===n.A.RIGHT?(e.preventDefault(),e.stopPropagation(),a&&a(),(0,l.GV)("web_keydown_right")):s===n.A.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t()))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[t]=a}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let r=s},593451(e,t,a){a.d(t,{M:()=>m,m:()=>_});var i,n=a(859471);a(825193);var l=a(987628),s=a(535273),r=a(438098),o=a(857062),d=a(562615);let{Provider:c,get:m}=(0,l.A)("VisualContext"),u=(void 0!==i||(i=a(466912)).hash&&"08cd44e128b47bb7c9b6b57bde25cae7"!==i.hash&&console.error("The definition of 'VisualContext_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),g=({children:e,pinKey:t,overrideValue:a={}})=>{let i=(0,s.A)(u,t),{videos:l,embed:m,link:g,isVideo:_}=i??{},p=(0,n.useMemo)(()=>l?.videoList?.v720P?.url?{duration:l.videoList.v720P.duration||void 0,height:l.videoList.v720P.height||void 0,thumbnail:l.videoList.v720P.thumbnail||void 0,url:l.videoList.v720P.url||void 0,width:l.videoList.v720P.width||void 0,captions_urls:l.videoList.v720P.captionsUrls||void 0}:void 0,[l?.videoList?.v720P?.duration,l?.videoList?.v720P?.height,l?.videoList?.v720P?.thumbnail,l?.videoList?.v720P?.url,l?.videoList?.v720P?.width,l?.videoList?.v720P?.captionsUrls]),h=(0,n.useMemo)(()=>l?.videoList?.vHLSV4?.url?{duration:l.videoList.vHLSV4.duration||void 0,height:l.videoList.vHLSV4.height||void 0,thumbnail:l.videoList.vHLSV4.thumbnail||void 0,url:l.videoList.vHLSV4.url||void 0,width:l.videoList.vHLSV4.width||void 0}:void 0,[l?.videoList?.vHLSV4?.duration,l?.videoList?.vHLSV4?.height,l?.videoList?.vHLSV4?.thumbnail,l?.videoList?.vHLSV4?.url,l?.videoList?.vHLSV4?.width]),y=(0,n.useMemo)(()=>l?.videoList?.vHLSV3MOBILE?.url?{duration:l.videoList.vHLSV3MOBILE.duration||void 0,height:l.videoList.vHLSV3MOBILE.height||void 0,thumbnail:l.videoList.vHLSV3MOBILE.thumbnail||void 0,url:l.videoList.vHLSV3MOBILE.url||void 0,width:l.videoList.vHLSV3MOBILE.width||void 0}:void 0,[l?.videoList?.vHLSV3MOBILE?.duration,l?.videoList?.vHLSV3MOBILE?.height,l?.videoList?.vHLSV3MOBILE?.thumbnail,l?.videoList?.vHLSV3MOBILE?.url,l?.videoList?.vHLSV3MOBILE?.width]),f=(0,n.useMemo)(()=>{let e=p||h||y;return l?.entityId&&e?{id:l.entityId,hasVideo:e,mp4:p||void 0,hls:h||void 0,hlsv3:y||void 0}:null},[h,y,p,l?.entityId]),A=(0,r.Xt)(m?.type),v=(0,r.rT)({isVideo:_,link:g}),{mainPinImage:T,srcSet:E,srcSizes:b}=(0,o.A)({pinKey:i}),x=i?.images_1200x||i?.images_orig||i?.images_736x||i?.images_564x||i?.images_474x||i?.images_236x,I=(0,n.useMemo)(()=>({height:x?.height??1,url:x?.url??"",width:x?.width??1}),[x]),C=i?.images_236x,L=(0,n.useMemo)(()=>C?.url?{height:C.height??1,url:C.url,width:C.width??1}:null,[C]),k=(0,n.useMemo)(()=>{let e=m?.subtype==="pinstory",t=a.mainImage||T,i=a?.carouselInfo?.carouselData?.index??0,n=a?.carouselInfo?.carouselData?.carousel_slots,l=(null!=i&&n&&n[i]?.link||null)??g??"";return{...a,mainImage:t,previewImage:void 0===a.previewImage?L:a.previewImage,mediaViewerImage:I,video:f,embed:m,isYoutubePin:v,isEmbeddedVideo:!!m?.src&&!A&&!e,isGif:A,imgSrc:A&&m?.src?m.src:t.url,...A?{}:{srcSet:E},srcSizes:b,finalLink:l}},[T,L,I,f,m,v,A,E,b,a,g]);return(0,d.jsx)(c,{value:k,children:e})},_=({children:e,pinKey:t,overrideValue:a={}})=>(0,d.jsx)(g,{overrideValue:a,pinKey:t,children:e})},548253(e,t,a){a.d(t,{A:()=>s});var i=a(601185),n=a(844255),l=a(971289);let s=({showProductDetailPage:e,skipActivation:t})=>{let{checkExperiment:a}=(0,i.A)(),s=(0,l.qJ)(),{isAuthenticated:r}=(0,n._8)();return!!r&&!!s&&(e?a("closeup_dweb_blended_ui",{dangerouslySkipActivation:t}).anyEnabled:a("closeup_dweb_blended_ui_organic",{dangerouslySkipActivation:t}).anyEnabled)}},578657(e,t,a){a.d(t,{A:()=>s});var i=a(963522),n=a(562615);let l=/^(?!.*#.*#)#[\p{L}\p{N}_]\S*$/gu;function s({closeupWithinMasonryEnabled:e=!1,peekCloseupEnabled:t=!1,mWebCloseupRedesignEnabled:a=!1,text:s}){let r=t||a?"200":"300";return s.split(new RegExp(/(#\S*)/)).map((t,a)=>{let s=`${a}-${t}`;return t.match(l)?(0,n.jsx)(i.KJ,{color:"link",inline:!0,size:r,children:(0,n.jsx)(i.N_,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},s):(0,n.jsx)(i.KJ,{color:e?"subtle":void 0,inline:!0,size:r,children:t},s)})}},160634(e,t,a){a.d(t,{A:()=>f});var i,n=a(61163),l=a(859471),s=a(979638);a(669897);var r=a(963522),o=a(578657),d=a(586733),c=a(535273),m=a(145133),u=a(678358),g=a(562615);let _=(void 0!==i||(i=a(246632)).hash&&"77396be9e54491e35d44dc059d7664fc"!==i.hash&&console.error("The definition of 'DescriptionWithLinksAndMentions_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),p=e=>null!=e&&e>-1,h=({color:e,mention:t,tagObjectId:a,tagType:i,textSize:n})=>{let{logContextEvent:l}=(0,d.o)();return(0,g.jsx)(r.N_,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),l({event_type:101,element:11915,aux_data:{tag_id:a,tag_type:i}})},underline:"none",children:(0,g.jsx)(r.KJ,{color:e,inline:!0,overflow:"normal",size:n,weight:"bold",children:t},t)},a)},y=({color:e,link:t,tagObjectId:a,tagType:i,text:n,textSize:l})=>{let{logContextEvent:s}=(0,d.o)(),o=(0,m.A)({site:"www"}),c=t.startsWith("pinterest://")?t.replace("pinterest://",`${o}/`):t;return(0,g.jsx)(r.KJ,{color:e,inline:!0,overflow:"normal",size:l,children:(0,g.jsx)(r.N_,{display:"inlineBlock",href:c,onClick:({event:e})=>{e.stopPropagation(),s({event_type:101,element:18123,aux_data:{tag_id:a,tag_type:i,url:t}})},underline:"hover",children:n},a)},n)},f=({description:e,mentionLinkColor:t,pinKey:a,shouldAdjustOffset:i,shouldMakeHashtagLinksFromText:d,shouldOverrideDescriptionLinks:m,textColor:f,textSize:A,descriptionLinks:v,userMentionTags:T})=>{let E;(0,l.useEffect)(()=>{(0,n.A)("DescriptionWithLinksAndMentions","/app/common/react/components/do/rich-pins/DescriptionWithLinksAndMentions/DescriptionWithLinksAndMentions.tsx")},[]);let{closeupWithinMasonryEnabled:b,peekCloseupEnabled:x}=(0,u._G)(),I=(0,c.A)(_,a),C=T?.length?T.map(e=>({...I?.userMentionTags?.find(t=>t.offset===e.originalOffset),...e})):I?.userMentionTags??[];E=m?v??[]:v?.length?v.map(e=>({...I?.descriptionLinks?.find(t=>t.offset===e.originalOffset),...e})):I?.descriptionLinks??[];let L=C.length>0,k=E?.length>0,{search:D}=(0,s.zy)(),S=new URLSearchParams(D).get("utm_source");if(!L&&!k||"ads_manager"===S)return(0,g.jsx)(r.KJ,{color:f,inline:!0,size:A,children:e});let w=0,j=[];return[...C.map(t=>{var a;let n;return{...t,type:"mention",offset:i?(a=t.offset??0,n=e.substr(0,a),(a??0)-(n.length-n.replace(/\s+/g," ").length)):t.offset??0}}),...E.map(e=>({...e,type:"link",offset:e.offset??0}))].filter(e=>p(e.offset)&&p(e.length)).sort((e,t)=>(e.offset??0)-(t.offset??0)).forEach(a=>{let i=a?.offset??0,n=a?.length??0,l=e.substr(w,i-w),s=e.substr(i,n);j.push(l),a?.type==="mention"?j.push((0,g.jsx)(h,{color:t,mention:s,tagObjectId:a.objectId,tagType:a.tagType,textSize:A})):a?.type==="link"&&a?.link&&j.push((0,g.jsx)(y,{color:t,link:a.link,tagObjectId:a.objectId,tagType:a.tagType,text:s,textSize:A})),w=i+n}),j.push(e.substr(w)),(d?j.flatMap(e=>"string"!=typeof e?e:(0,o.A)({closeupWithinMasonryEnabled:b,peekCloseupEnabled:x,text:e})):j).reduce((e,t)=>(0,g.jsxs)(l.Fragment,{children:[e,t]}),null)}},1648(e,t,a){a.d(t,{N:()=>d,Q:()=>o});var i=a(859471),n=a(415814),l=a(987628),s=a(562615);let{Provider:r,get:o}=(0,l.A)("Flag"),d=({children:e})=>{let[t,a]=(0,i.useState)(),[l,o]=(0,i.useState)(n.nl.REPORT),[d,c]=(0,i.useState)(n.nW.STARTED),[m,u]=(0,i.useState)(),[g,_]=(0,i.useState)(),p=(0,i.useMemo)(()=>({flagReason:g,flow:l,status:d,selectedReason:m,modalTitle:t,setFlagReason:_,setFlow:o,setModalTitle:a,setStatus:c,setSelectedReason:u}),[t,l,d,m,g]);return(0,s.jsx)(r,{value:p,children:e})}},415814(e,t,a){a.d(t,{bI:()=>l,nW:()=>n,nl:()=>i});let i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},n={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},187458(e,t,a){a.d(t,{A:()=>d});var i=a(61163),n=a(859471),l=a(963522),s=a(989457),r=a(538329),o=a(562615);let d=({accessibilityLabel:e,isQuestion:t,name:a,size:d,src:c})=>{(0,n.useEffect)(()=>{(0,i.A)("CommentAvatar","/app/packages/comment/CommentAvatar.tsx")},[]);let m=(0,r.A)();return(0,o.jsxs)(l.az,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,o.jsx)(s.eu,{accessibilityLabel:e,name:a,size:d,src:c}),t&&(0,o.jsxs)(l.az,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,o.jsx)(l.az,{position:"absolute",children:(0,o.jsx)(l.In,{accessibilityLabel:m._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech-fill"})}),(0,o.jsx)(l.az,{position:"absolute",children:(0,o.jsx)(l.In,{accessibilityLabel:m._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"circle-question-mark",size:8})})]})]})}},110788(e,t,a){a.d(t,{A:()=>eo});var i=a(61163),n=a(859471),l=a(963522),s=a(106386),r=a(600954),o=a(131463),d=a(531265),c=a(1648),m=a(187458),u=a(839907),g=a(375430),_=a(808384),p=a(989457),h=a(562615);let y={helpfulStyle:{backgroundImage:`url(${g})`},lovedStyle:{backgroundImage:`url(${_})`}},f=({response:e,handleReactionListHover:t,maybeDismissReactionListWithDelay:a})=>{(0,n.useEffect)(()=>{(0,i.A)("ReactionUser","/app/packages/comment/ReactionUser.tsx")},[]);let s=14===e.reaction_type,r=1===e.reaction_type,o=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,h.jsxs)(l.so,{alignItems:"center",children:[(0,h.jsx)(l.$A,{href:`/${e.user.username}/`,onBlur:a,onFocus:t,children:(0,h.jsxs)(l.so,{alignItems:"center",children:[(0,h.jsx)(l.az,{maxWidth:40,children:(0,h.jsx)(p.eu,{accessibilityLabel:"",name:o,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,h.jsx)(l.az,{marginStart:2,maxWidth:80,children:(0,h.jsx)(l.KJ,{size:"100",weight:"bold",children:o})})]})}),(0,h.jsxs)(l.az,{alignContent:"end",display:"flex",padding:2,children:[r&&(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:y.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),s&&(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:y.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var A=a(693154),v=a(430705),T=a(870540),E=a(847753);let b=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],x=({commentId:e,handleReactionListHover:t,isMarkedHelpfulByMe:a,isLovedByMe:s,isTry:r,maybeDismissReactionListWithDelay:o})=>{(0,n.useEffect)(()=>{(0,i.A)("ReactionList","/app/packages/comment/ReactionList.tsx")},[]);let d=(0,A.A)(),c=(0,T.A)(),m=(0,v.A)({name:"ApiResource",options:{url:r?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:b}}),u=(0,E.H7)(d,c)||("id"in d&&d.id?d.id:""),g=m.data;(s||a)&&g&&(g=g.filter(e=>e.user.id!==u),g=[{id:e,reaction_type:s?1:14,user:{first_name:(0,E.uF)(d,c),full_name:(0,E.uF)(d,c),id:u,image_medium_url:(0,E.Qp)(d,c),is_private_profile:!!d.isAuth&&!!d.isPrivateProfile,username:(0,E.TO)(d,c)}},...g]);let _=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let{current:e}=_,t=()=>{m.isFetching||(m.isAtEnd?e?.removeEventListener("scroll",t):m.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[m]),(0,h.jsx)(l.az,{ref:_,maxHeight:140,overflow:"auto",rounding:200,width:200,children:g?.map(e=>(0,h.jsx)(l.az,{"data-test-id":"reaction-list-single-user",margin:3,children:(0,h.jsx)(f,{handleReactionListHover:t,maybeDismissReactionListWithDelay:o,response:e})},e.id))})};var I=a(538329),C=a(542975),L=a(618243),k=a(678358);let D=(0,n.lazy)(()=>a.e("45633").then(a.bind(a,883736))),S="comment-reaction-container-entry-point",w=({commentId:e,dismissReactionList:t,helpfulCount:a,isDesktop:s,isMarkedHelpfulByMe:r,isLovedByMe:o,isReactionListOpen:d,isTry:c,lovedCount:m,onReactionCountHover:p,onToggleHelpful:y,onToggleLove:f})=>{(0,n.useEffect)(()=>{(0,i.A)("CommentReactionContainer","/app/packages/comment/CommentReactionContainer.tsx")},[]);let A=(0,I.A)(),{isCommentComposerFocused:v}=(0,k._G)(),T=(0,n.useRef)(null),E=s?16:12,[b,w]=(0,n.useState)(!1),j=!1,P=(m||0)+(a||0);r&&o&&(P-=1);let R=e=>()=>{w(e)},M=()=>{j=!0,p()},z=()=>{j=!1,setTimeout(()=>{j||t()},1e3)},O=s?(0,h.jsx)(l.az,{"data-test-id":S,children:b?(0,h.jsx)(l.Rp,{onMouseLeave:R(!1),onTap:R(!1),children:(0,h.jsx)(L.A,{children:(0,h.jsx)(D,{onTooltipHover:R(!1),setHelpful:y(!0),setLoved:f(!0)})})}):(0,h.jsx)(l.Rp,{onMouseEnter:R(!0),onTap:R(!0),children:(0,h.jsx)(l.In,{accessibilityLabel:A._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart",size:E})})}):(0,h.jsx)(l.az,{"data-test-id":S,margin:-1.5,children:(0,h.jsx)(l.K0,{accessibilityLabel:A._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),icon:"heart",onClick:f(!0),size:"xs"})});return(0,h.jsxs)(l.so,{alignItems:"center",gap:{row:s?1:1.5,column:0},children:[r||o?(0,h.jsx)(l.Rp,{onTap:()=>{y(!1)(),f(!1)()},children:(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${o?_:g})`,backgroundSize:"contain"}},"data-test-id":o?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:E,width:E})}):O,P>0&&(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(l.Rp,{accessibilityLabel:(0,C.$)(A.ngettext('{{reactionCount}} Reaction', '{{reactionCount}} Reactions', P, 'Comment.CommentReactionContainer.ariaLabel', 'accessibility label for the number of reactions to a comment. reactionCount: number of reactions'),{reactionCount:P.toString()}),onMouseEnter:M,onMouseLeave:z,onTap:M,children:(0,h.jsx)(l.az,{ref:T,"data-test-id":"comment-reaction-container-reaction-count",display:s?void 0:"flex",children:(0,h.jsx)(l.KJ,{color:s?"subtle":"default",inline:!0,size:s?"200":"100",weight:"bold",children:P})})}),d&&(0,h.jsx)(l.Wd,{zIndex:u.eU,children:(0,h.jsx)(l.AM,{anchor:T.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,shouldFocus:!v,children:(0,h.jsx)(l.Rp,{onMouseEnter:M,onMouseLeave:z,children:(0,h.jsx)(x,{commentId:e,handleReactionListHover:M,isLovedByMe:o,isMarkedHelpfulByMe:r,isTry:c,maybeDismissReactionListWithDelay:z})})})})]})]})};var j=a(849842),P=a(135592),R=a(816323),M=a(134589);function z(e){(0,n.useEffect)(()=>{(0,i.A)("PhotoCommentContent","/app/packages/comment/PhotoCommentContent.tsx")},[]);let{comment:t,commentTags:a,handlePhotoTap:s,isDesktop:r,previewPhoto:o,taggedUsers:d}=e,[c,m]=(0,n.useState)(!1),{user:{username:u}}=t,g="text"in t?t.text:t.details,_=r?`${u} ${g}`:g,{height:p,url:y,width:f}=o||{},A=p??R.uO,v=f??R.Bo;return(0,h.jsxs)(l.az,{children:[(0,h.jsx)(M.A,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:d,tags:a,text:_}),r||!r?(0,h.jsx)(l.az,{marginBottom:r?void 0:1.5,marginTop:r?1:.5,children:(0,h.jsx)(R.Ay,{canEnlargePhoto:r,isSelectedPhoto:!1,previewPhoto:o})}):(0,h.jsx)(l.az,{height:150,marginBottom:r?4:2,marginTop:1,width:150,children:(0,h.jsx)(l.Rp,{disabled:!r,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onTap:s,children:(0,h.jsx)(l.n1,{rounding:200,wash:!0,children:y&&(0,h.jsx)(l._V,{alt:y,color:"#efefef",naturalHeight:A,naturalWidth:v,src:y,children:(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{cursor:r?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${.4*!!c})`}},height:"100%",width:"100%"})},y)})})})]})}var O=a(201593),N=a(791117),G=a(504252);function F({parentId:e,isDesktop:t,renderCommentThread:a}){(0,n.useEffect)(()=>{(0,i.A)("ReplyThread","/app/packages/comment/ReplyThread.tsx")},[]);let r=(0,I.A)(),{isDarkMode:o}=(0,O.D2)(),d=(0,N.p$)(),c=(0,s.d4)(({feeds:t})=>{let a=t[`${G.A.AGGREGATED_COMMENT_REPLIES}:${e}`]||[],i=t[`${G.A.AGGREGATED_COMMENTS}:${e}`]||[];return a.concat(i).reduceRight((e,{id:t})=>{let a=d[t];return a?[...e,a]:e},[])}),m=(0,n.useRef)(!0),u=(0,n.useRef)(c.length),[g,_]=(0,n.useState)(1),[p,y]=(0,n.useState)(!1),f=g===c.length;return(0,n.useEffect)(()=>{let e=u.current,t=c.length;m.current?t>0&&(m.current=!1):t>e&&y(!0),t!==e&&_(e=>e>1?t:+(t>0)),u.current=t},[c.length]),(0,h.jsxs)(n.Fragment,{children:[c.length>1&&(0,h.jsx)(l.Rp,{onTap:()=>{_(f?0:c.length)},children:(0,h.jsxs)(l.az,{alignItems:t?void 0:"center",display:t?void 0:"flex",marginBottom:t?4:6,children:[t?(0,h.jsx)(l.az,{display:"inlineBlock",marginEnd:2,children:(0,h.jsx)(l.KJ,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}):(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{background:o?"white":"black"}},height:1,marginEnd:2,width:32}),(0,h.jsx)(l.KJ,{color:t?"subtle":"default",inline:!0,size:"100",weight:"bold",children:f?r._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,C.vQ)(r.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', c.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:c.length})})]})}),a({comments:(()=>{if(0===g||0===c.length)return[];if(1===g)if(p)return c.slice(-1);else return c.slice(0,1);return c.slice(0,g)})()})]})}var K=a(586733),H=a(457315),U=a(567176),V=a(393320),B=a(173832),$=a(844255),W=a(74806),J=a(706466),Y=a(152689),q=a(83203),Q=a(795275),X=a(519298),Z=a(702970),ee=a(974694),et=a(408738);let ea=(0,n.lazy)(()=>a.e("41092").then(a.bind(a,661615))),ei=(0,et.A)(()=>a.e("63112").then(a.bind(a,350296)),void 0,e=>350296,"app-packages-comment-CommentOverflowPopover",e=>["63112"]),en=(0,n.lazy)(()=>a.e("41684").then(a.bind(a,886335)));function el(e){let t,a;(0,n.useEffect)(()=>{(0,i.A)("Comment","/app/packages/comment/Comment.tsx")},[]);let{aggregatedPinDataId:g,closeupAttributionId:_,closeupAttributionUsername:p,comment:y,featuredCommentId:f,isDesktop:v,isReadOnly:b,openOverflowMenu:x,parentId:D,parentType:S=Y.S.pin,pinId:R,reactionListCommentId:G,renderCommentThread:et,replyingToCommentId:el,showReactionListForComment:es,showTopCommentHeading:er,toggleEditComposer:eo,toggleHelpful:ed,toggleLike:ec,toggleReplyComposer:em,userAvatarSize:eu,viewParameter:eg}=e,{user:{id:e_,first_name:ep,id:eh,image_medium_url:ey,username:ef},id:eA,is_translatable:ev,comment_count:eT,helpful_count:eE,tags:eb=[]}=y,[ex,eI]=(0,n.useState)(!1),eC=ex&&y.translatedText||y.text,eL=!ev||""===y.translatedText,ek=(0,q.A)(),eD=!1,eS=0,ew=!1,ej=!!y.marked_helpful_by_me,eP=v?[y.user]:[],eR="",eM=new Date;"aggregatedcomment"===y.type?(eD=y.highlighted_by_pin_owner,eS=y.reaction_counts[1],ew=y.reaction_by_me>0,a=y?.media?.sticker,eP.push(...y.tagged_users),eR=v?`${ef} ${eC??""}`:eC??"",eM=new Date(y.created_at)):(eS=y.like_count,ew=y.liked_by_me,t=y.images[0]||{},eR=v?`${ef} ${y.details}`:y.details,eM=new Date(y.done_at));let ez=t?.originals,eO=a||ez,eN=(0,I.A)(),eG=(0,A.A)(),{setIsMediaViewerOpen:eF,clientTrackingParams:eK,setIsCommentPopoverInteractionActive:eH}=(0,k._G)(),{logContextEvent:eU}=(0,K.o)(),{isBot:eV}=(0,$._8)(),{showToast:eB}=(0,J.CG)(),e$=(0,s.wA)(),{isDarkMode:eW}=(0,O.D2)(),eJ=(0,n.useRef)(null),{hasApplicableLawForCountry:eY}=(0,X.Ay)(),eq=!b||eY,eQ="aggregatedcomment"===y.type&&1===y.comment_tag,eX=eQ&&v,eZ=(0,T.A)(),e0=(0,E.H7)(eG,eZ),{nativeEngagementsHiddenForUser:e1}=(0,Q.lz)(),{aggregatedCommentsHiddenForUser:e3,translateAggregatedComment:e6,updateAggregatedComment:e5}=(0,N.Vc)(),e2=(0,d.A)(),e4="userdiditdata"===y.type,e7=(0,V.A)(),e8=ev&&!1,e9=`comment-overflow-popover-${eA}`,te=(0,u.bp)(ef,eb,eW,!v),tt={SHOW_TRANSLATION:eN._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:eN._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:eN._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},ta=(0,n.useRef)(tt.SHOW_TRANSLATION),[ti,tn]=(0,o.A)(),[tl,ts]=(0,n.useState)(!1),[tr,to]=(0,n.useState)(!1),[td,tc]=(0,n.useState)(!1),[tm,tu]=(0,n.useState)(!1),[tg,t_]=(0,n.useState)(!1),[tp,th]=(0,n.useState)(!1),[ty,tf]=(0,n.useState)(!1),[tA,tv]=(0,n.useState)(u.YM.NONE),tT=e=>()=>{eo?eo(y):to(e)};(0,n.useEffect)(()=>{e8&&eU({event_type:10416,view_type:3,view_parameter:eg,component:"pin"===S?13696:13697})},[eU,S,e8,eg]),(0,n.useEffect)(()=>{eT>0&&!eV&&e$((0,W.Jt)("aggregatedcomment"===y.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:eA,redux_normalize_feed:!0}}))},[y.type,eA]);let tE=S.toLowerCase()===Y.S.aggregatedComment.toLowerCase()||S.toLowerCase()===Y.$.didIt.toLowerCase(),tb=y.user.first_name||"",tx=async({contentMarkdown:e,force:t,tags:a})=>{let i,n;tu(!0);let l=y.id;if(tE&&(i=S.toLowerCase()===Y.$.didIt,l=D,n=y.id),l)try{await e2({force:t,fromUnifiedComment:!0,objectType:e4||i?Y.S.didIt:Y.S.aggregatedComment,objectId:l,orbacSubjectId:e0,tags:a,text:e,replyToCommentId:n})}catch(t){let e=(0,H.A)(t,"code");if([B.wg,B.HU].includes(e??0)&&v)return tv(e===B.wg?u.YM.WARNING:u.YM.BLOCK),tu(!1),!1}return em&&em(void 0),tu(!1),!0},tI=async({contentMarkdown:e,force:t,tags:a})=>{tc(!0);try{e4?await e$((0,Z.pU)({id:y.id,details:e,pinId:R??"",image_signatures:"image_signatures"in y&&y.image_signatures?y.image_signatures:[]})):await e5({commentId:y.id,force:t,orbacSubjectId:e0,tags:a,text:e})}catch(e){if([B.wg,B.HU].includes((0,H.A)(e,"code")??0)&&v)return tv(e.code===B.wg?u.YM.WARNING:u.YM.BLOCK),tc(!1),!1}return to(!1),tc(!1),!0},tC=()=>{v?(eH(!tl),ts(!tl)):x&&x(y)},tL=e=>()=>{eH(e),ts(e),tf(e),e||eU({component:14349,event_type:9408})},tk=()=>{tv(u.YM.NONE)},tD=e=>{e?tn():ti(),eF(!e),t_(!e)};(0,n.useEffect)(()=>{ex&&eL&&(eI(!ex),eB(({hideToast:e})=>(0,h.jsx)(U.A,{onHide:e,text:eN._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[ex,eL]),ex?ta.current=y.translatedText?tt.SHOW_ORIGINAL:tt.TRANSLATING:ta.current=tt.SHOW_TRANSLATION;let tS=v?128:110,tw="aggregatedcomment"===y.type&&y.media?.sticker?.image_url&&(0,h.jsx)(l.az,{height:tS,marginBottom:+!!v,marginTop:1,width:tS,children:y.media?.sticker?.image_url&&(0,h.jsx)(l._V,{alt:y.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:y.media.sticker.image_url})});return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(l.y$,{accessibilityLabel:"Loading comment",show:td}),!tr&&!td&&(0,h.jsxs)(l.so,{alignItems:"stretch",justifyContent:"start",children:[(0,h.jsx)(l.az,{marginEnd:2,children:(0,h.jsx)(r.N_,{to:`/${ef}/`,children:(0,h.jsx)(m.A,{isQuestion:eX,name:ep||ef||"",size:eu,src:ey??""})})}),(0,h.jsxs)(l.so,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,h.jsxs)(l.so,{justifyContent:"between",children:[(0,h.jsx)(l.so.Item,{minWidth:0,children:(0,h.jsxs)(l.so,{dataTestId:"author-and-comment-container",direction:"column",children:[!v&&(0,h.jsxs)(l.so,{alignItems:"center",gap:{row:1,column:0},children:[(0,h.jsx)(M.A,{isFirstTaggedUserAuthor:!0,lineHeight:"14px",marginEnd:0,shouldShowFirstNameOnly:!0,size:"100",taggedUsers:[y.user],tags:(0,u.bp)(ef,[],eW),text:ef}),eQ&&!er&&(0,h.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{lineHeight:"14px"}},children:(0,h.jsx)(l.KJ,{color:"subtle",size:"100",children:eN._('asked a question \uD83D\uDC40', 'comment.question.label', 'label on a comment that is a question')})}),er&&(0,h.jsxs)(l.so,{children:[(0,h.jsx)(l.az,{alignItems:"center",display:"flex",marginEnd:1,children:(0,h.jsx)(l.In,{accessibilityLabel:(0,u.ye)(eN),color:"recommendation",icon:"star-fill",size:12})}),(0,h.jsx)(l.KJ,{color:"recommendation",size:"100",weight:"bold",children:(0,u.fn)(eN)})]}),(eQ||er)&&eM&&(0,h.jsx)(l.KJ,{color:"subtle",size:"100",children:"·"}),eM&&(0,h.jsx)(l.az,{"data-test-id":"comments-time-passed",children:(0,h.jsx)(l.KJ,{color:"subtle",size:"100",children:e7(eM,!0)})})]}),e4?(0,h.jsx)(z,{comment:y,commentTags:te,handlePhotoTap:()=>tD(tg),isDesktop:v,previewPhoto:ez,taggedUsers:eP}):(0,h.jsx)(M.A,{isFirstTaggedUserAuthor:!!v,lineHeight:v?void 0:"21px",marginBottom:v?void 0:"4px",shouldShowFirstNameOnly:!0,taggedUsers:eP,tags:te,text:eR}),tw,e8&&(0,h.jsx)(l.az,{marginBottom:2,marginTop:2,children:(0,h.jsx)(l.Rp,{onTap:()=>void(!ex&&!y.translatedText&&e6(y.id),ex||ta.current!==tt.SHOW_TRANSLATION?ex&&ta.current===tt.SHOW_ORIGINAL&&eU({event_type:10418,view_type:3,view_parameter:eg,component:"pin"===S?13696:13697}):eU({event_type:10417,view_type:3,view_parameter:eg,component:"pin"===S?13696:13697}),eI(!ex)),children:(0,h.jsx)(l.KJ,{color:"subtle",size:"300",weight:"bold",children:ta.current})})})]})}),f===eA&&(0,h.jsx)(l.az,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eD&&(0,h.jsx)(l.az,{marginBottom:v?3:1.5,marginTop:v?4:-.5,children:(0,h.jsx)(l.KJ,{size:"100",children:(0,C.vQ)(eN._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:p})})}),eq&&(0,h.jsx)(l.az,{alignItems:"center",display:"flex",height:v?25:"100%",justifyContent:"between",position:"relative",children:(0,h.jsxs)(l.so,{alignItems:"center",gap:{row:v?5:4,column:0},children:[!b&&v&&(0,h.jsx)(l.az,{"data-test-id":"comments-time-passed",children:(0,h.jsx)(l.KJ,{color:"subtle",size:"200",children:e7(eM,!0)})}),!b&&(0,h.jsx)(l.az,{"data-test-id":"comment-reply-button-container",children:(0,h.jsx)(l.Rp,{onTap:()=>{em&&em(y,D,S)},children:(0,h.jsx)(l.KJ,{color:v?"subtle":"default",size:v?"200":"100",weight:"bold",children:eN._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!b&&(0,h.jsx)(w,{commentId:eA,dismissReactionList:()=>{es(void 0)},helpfulCount:eE,isDesktop:v,isLovedByMe:ew,isMarkedHelpfulByMe:ej,isReactionListOpen:G===eA,isTry:e4,lovedCount:eS,onReactionCountHover:()=>{es(eA),eU({event_type:9906,component:"pin"===S?13696:13697,view_type:3,view_parameter:eg})},onToggleHelpful:e=>()=>{ej!==e&&ed(eA,!e,e4)()},onToggleLove:e=>()=>{ew!==e&&ec(eA,!e,e4)()}}),!("id"in eG&&eG.id===eh&&eQ)&&(v?(0,h.jsx)(l.az,{ref:eJ,"data-test-id":"comment-more-options",children:(0,h.jsx)(l.K0,{accessibilityControls:e9,accessibilityExpanded:tl,accessibilityHaspopup:!0,accessibilityLabel:eN._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"subtle",onClick:tC,size:"xs"})}):(0,h.jsx)(l.az,{"data-test-id":"comment-more-options",children:(0,h.jsx)(l.Rp,{accessibilityControls:e9,accessibilityExpanded:tl,accessibilityHaspopup:!0,onTap:tC,children:(0,h.jsx)(l.In,{accessibilityLabel:eN._('More', 'comment.button.more', 'see more options for comment'),color:eW?"light":"dark",icon:"ellipsis",size:12})})}))]})})]})]}),v&&(0,h.jsxs)(n.Fragment,{children:[tr&&(0,h.jsx)(l.az,{marginTop:3,children:(0,h.jsx)(j.A,{clientTrackingParams:eK,commentWarningModalState:tA,dismissCommentWarningModal:tk,initialTags:y.tags,initialText:"aggregatedcomment"===y.type?y.text:y.details,isEditing:!0,objectType:Y.S.aggregatedComment,onAddItem:tI,onCancelItem:tT(!1),postedPhoto:eO,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:eg})}),el===eA&&(0,h.jsx)(l.az,{marginStart:12*!tE,marginTop:3,children:(0,h.jsx)(j.A,{commentWarningModalState:tA,dismissCommentWarningModal:tk,initialTags:tE?[{offset:0,object_id:e_,length:tb.length,tag_type:1}]:[],initialText:tE?`${tb} `:"",isReplying:!0,objectType:Y.S.aggregatedComment,onAddItem:tx,onCancelItem:()=>{em&&em()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:eg})})]}),(eT>0||tm)&&(0,h.jsx)(l.az,{marginStart:v?12:10,marginTop:v?4:3,children:(0,h.jsx)(F,{isDesktop:v,parentId:eA,renderCommentThread:({comments:e})=>et({comments:e,isLoading:tm})})}),v&&eq&&(0,h.jsx)(ei,{aggregatedPinDataId:g,anchor:eJ.current,closeupAttributionId:_,comment:y,dismiss:e=>{ts(!1),e||(eH(!1),eU({component:14349,event_type:10128}))},id:e9,isOpen:tl,isReply:tE,onEdit:tT(!0),onShowBlockUserModal:tL(!0),parentId:D,pinId:R}),tp&&(0,h.jsx)(L.A,{children:(0,h.jsx)(c.N,{children:(0,h.jsx)(en,{aggregatedPinDataId:g,didItDataId:eA,onClose:e=>()=>{th(!e)},pinId:R??"",username:ef,users:[y.user]})})}),ty&&(0,h.jsx)(L.A,{children:(0,h.jsx)(ea,{firstName:ep??"",onBlockUser:()=>{e$((0,ee.om)({id:e_,orbacSubjectId:e0,blockSource:"comment",blockContext:eA,logContextEvent:eU})),e3(e_),e1(e_),eU({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eG.isAuth?eG.id:null}}),eU({component:14349,event_type:9407}),tf(!1),ek(),eH(!1)},onClearModal:tL(!1)})}),!!ez&&tg&&(0,h.jsx)(P.A,{onDismiss:()=>tD(tg),photo:ez})]})}var es=a(726329),er=a(535494);function eo(e){let t,a;(0,n.useEffect)(()=>{(0,i.A)("CommentThread","/app/packages/comment/CommentThread.tsx")},[]);let{aggregatedPinDataId:s,comments:r,commentsDisabled:o,commentsScrollContainerRef:d,featuredCommentId:c,gapSize:m=6,id:g,isDesktop:_,isLoading:p=!1,isReadOnly:y,openOverflowMenu:f,toggleReplyComposer:A,parentId:v,parentType:T,replyingToCommentId:E,showingCloseupCommentModule:b,toggleEditComposer:x,toggleHelpful:C,toggleLike:L,userAvatarSize:D,isORBACProfileManager:S,isVideo:w,storyPinDataId:j,pinId:P,closeupAttributionId:R,closeupAttributionUsername:M,pinnerId:z,showReactionListForComment:O,reactionListCommentId:N,viewParameter:G}=e,F=(0,I.A)(),{closeupWithinMasonryEnabled:K}=(0,k._G)(),H=(0,er.A)({skipExpActivation:!0}),U=!!b&&!1;return(K&&(t="8px"),a=j?"story":w?"video":"pin",o)?(0,h.jsx)(l.az,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:K?2:void 0,width:"100%",children:(0,h.jsx)(l.KJ,{align:_?"start":"center",color:"subtle",children:F._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):0!==r.length||"pin"!==T||p||_?r.length>0?(0,h.jsxs)(l.az,{ref:d,dangerouslySetInlineStyle:{__style:{gap:`${4*m}px 0`,scrollbarGutter:K?"stable":void 0,paddingTop:t,overflowX:H?"scroll":void 0}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",id:g,maxHeight:K?722:"100%",overflow:K?"auto":void 0,width:"100%",children:[r.map((e,t)=>(0,h.jsx)(es.g$,{componentType:"pin"===T?13696:13697,impressionAuxFields:{commentId:e.id,pinId:P,pinOwnerUserId:R,pinType:a,parentId:v,parentType:T,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:t,viewType:_?3:98,children:({impressionTrackerRef:a})=>(0,h.jsx)(l.az,{ref:a,"aria-label":F._('Comment thread', 'commentThread.ariaLabel', 'Accessible label for the comment thread'),"data-test-id":"commentThread-comment",role:"group",tabIndex:0,children:(0,h.jsx)(el,{aggregatedPinDataId:s,closeupAttributionId:R,closeupAttributionUsername:M,comment:e,featuredCommentId:c,isDesktop:_,isReadOnly:y,openOverflowMenu:f,parentId:v,parentType:T,pinId:P,reactionListCommentId:N,renderCommentThread:({comments:e,isLoading:t})=>(0,h.jsx)(eo,{aggregatedPinDataId:s,closeupAttributionId:R,closeupAttributionUsername:M,comments:e,commentsDisabled:!1,featuredCommentId:c,gapSize:_?2:6,isDesktop:_,isLoading:t,isORBACProfileManager:S,isReadOnly:y,isVideo:w,openOverflowMenu:f,parentId:v,parentType:T,pinId:P,pinnerId:z,reactionListCommentId:N,replyingToCommentId:E,showReactionListForComment:O,storyPinDataId:j,toggleEditComposer:x,toggleHelpful:C,toggleLike:L,toggleReplyComposer:A,userAvatarSize:"sm",viewParameter:G}),replyingToCommentId:E,showReactionListForComment:O,showTopCommentHeading:U&&0===t,toggleEditComposer:x,toggleHelpful:C,toggleLike:L,toggleReplyComposer:A,userAvatarSize:D,viewParameter:G})})},e.id)),p&&(0,h.jsx)(l.y$,{accessibilityLabel:F._('Comments loading', ' - ', ' -- '),show:p})]}):(0,h.jsx)(l.az,{alignSelf:"center",width:"100%",children:(0,h.jsx)(l.y$,{accessibilityLabel:F._('Comments loading', ' - ', ' -- '),show:p})}):(0,h.jsx)(l.az,{alignSelf:"center","data-test-id":"no-comments-label",width:"100%",children:(0,h.jsx)(l.KJ,{align:"center",color:"subtle",children:(0,u.JL)(F)})})}},849842(e,t,a){a.d(t,{A:()=>o});var i=a(61163),n=a(859471),l=a(170052),s=a(562615);let r=(0,n.lazy)(()=>Promise.all([a.e("7688"),a.e("14945")]).then(a.bind(a,487584)));function o(e){return(0,n.useEffect)(()=>{(0,i.A)("InlineCommentComposer","/app/packages/comment/InlineCommentComposer.tsx")},[]),(0,s.jsx)(l.A,{fallback:null,children:(0,s.jsx)(r,{...e})})}},135592(e,t,a){a.d(t,{A:()=>c});var i=a(61163),n=a(859471),l=a(963522),s=a(760596),r=a(995273),o=a(538329),d=a(562615);function c({onDismiss:e,photo:t}){(0,n.useEffect)(()=>{(0,i.A)("MediaViewer","/app/packages/comment/MediaViewer.tsx")},[]);let a=(0,o.A)(),{height:c,url:m,width:u}=t,g=Math.min(c??936,936),_="100vh",p=a._('Close media viewer', 'comments.photo.mediaViewer.close', 'Close media viewer overlay');return(0,d.jsxs)(l.Wd,{zIndex:r.nH,children:[(0,d.jsx)(l.Rp,{mouseCursor:"zoomOut",onTap:e,children:(0,d.jsxs)(l.az,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:_,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,d.jsx)(l.az,{left:!0,padding:5,position:"absolute",top:!0,children:(0,d.jsx)(l.K0,{accessibilityLabel:p,icon:"close",iconColor:"inverse",onClick:e,padding:3,size:"lg"})}),(0,d.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:_,maxHeight:g,width:u,children:m&&(0,d.jsx)(l._V,{alt:m??"",fit:"contain",naturalHeight:c??1,naturalWidth:u??1,src:m},m)})]})}),(0,d.jsx)(s.A,{onClose:e})]})}},816323(e,t,a){a.d(t,{Ay:()=>y,Bo:()=>h,uO:()=>p});var i=a(61163),n=a(859471),l=a(963522),s=a(131463),r=a(839907),o=a(782129),d=a(135592),c=a(538329),m=a(844255),u=a(971289),g=a(678358),_=a(562615);let p=150,h=346;function y({canEnlargePhoto:e,containerWidth:t,isSelectedPhoto:a,onImageTap:y,previewPhoto:f,removeSelectedPhoto:A}){(0,n.useEffect)(()=>{(0,i.A)("PhotoCommentPreview","/app/packages/comment/PhotoCommentPreview.tsx")},[]);let v=(0,c.A)(),T=(0,u.qJ)(),{isRTL:E}=(0,m._8)(),{setIsMediaViewerOpen:b}=(0,g._G)(),[x,I]=(0,s.A)(),[C,L]=(0,n.useState)(!1),[k,D]=(0,n.useState)(!1),[S,w]=(0,n.useState)(null),[j,P]=(0,n.useState)(r.nk),R=(0,o.A)(f)?f?.url:f?.image_url;(0,n.useEffect)(()=>{(async()=>{R&&!(0,o.A)(f)&&w(await new Promise((e,t)=>{let a=new Image;a.onload=()=>{e({width:a.width,height:a.height})},a.onerror=t,a.src=R}))})()},[R,f]);let M=(0,o.A)(f)?f?.width:S?.width,z=(0,o.A)(f)?f?.height:S?.height,O=M??0,N=z??0,G=R??"",F=Math.min((t||(T?h:312))/O,(T?p:110)/N,1),K=v._('Remove photo', 'photoCommentPreview.removePhoto', 'Icon to remove the selected photo from the comment composer'),H=v._('Photo', 'photoCommentPreview.previewPhoto', 'Photo previewed as part of a comment'),U=e=>{e?I():x(),b(!e),L(!e),y&&y()};return(0,_.jsxs)(l.az,{height:F*N,marginTop:3*!!a,position:"relative",width:F*O,children:[(0,_.jsx)(l.Rp,{disabled:!e,onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),onTap:()=>U(C),children:(0,_.jsx)(l.n1,{rounding:200,children:G&&(0,_.jsx)(l._V,{alt:H,color:j,naturalHeight:N,naturalWidth:O,onLoad:()=>{P(r.g1),a&&URL.revokeObjectURL(G)},src:G,children:e&&(0,_.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${.4*!!k})`}},height:"100%",width:"100%"})},H)})}),a&&(0,_.jsx)(l.az,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:E,marginEnd:-3,marginTop:-3,position:"absolute",right:!E,top:!0,width:24,children:(0,_.jsx)(l.K0,{accessibilityLabel:K,bgColor:"secondary",icon:"close",onClick:A,size:"xs"})}),C&&(0,_.jsx)(d.A,{onDismiss:()=>U(C),photo:f})]})}},134589(e,t,a){a.d(t,{A:()=>r});var i=a(61163),n=a(859471),l=a(963522),s=a(562615);let r=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:a,marginBottom:r,marginEnd:o,shouldShowFirstNameOnly:d,size:c,tags:m,taggedUsers:u,text:g})=>{(0,n.useEffect)(()=>{(0,i.A)("TaggedText","/app/packages/comment/TaggedText.tsx")},[]);let _=(0,n.useRef)(null),p=(e,t)=>(0,s.jsx)(l.KJ,{color:"neutral",inline:!0,overflow:"normal",size:c,children:(0,s.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{lineHeight:a,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t);return(0,s.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:r}},children:(()=>{if(!m.length||!u||m.length!==u.length)return p(g,"1");let i=0,n=[];return m.forEach((a,r)=>{var o,m;let _,h=g.substring(i,a.offset);i=a.offset+a.length;let y=g.substring(a.offset,i);n=n.concat(p(h,`${r}a`)).concat((o=a.color,m=`${r}b`,_=d||0===r&&t?u[r].first_name||u[r].username[0]:y,(0,s.jsx)(l.KJ,{color:o,inline:!0,overflow:"normal",size:c,weight:"bold",children:e?_:(0,s.jsx)(l.N_,{display:"inlineBlock",href:`/${u[r].username}`,underline:"hover",children:_})},m)))}),n=n.concat(p(g.substring(i),"2")),(0,s.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{lineHeight:a}},display:d?"flex":void 0,marginEnd:o??3,position:"relative",children:(0,s.jsx)(l.KJ,{ref:_,color:"neutral",inline:!0,lineClamp:e?1:void 0,size:c,children:n})})})()})}},839907(e,t,a){a.d(t,{AF:()=>m,AP:()=>E,Bk:()=>s,EG:()=>D,JL:()=>A,PP:()=>I,RR:()=>C,YM:()=>p,Yv:()=>r,bp:()=>v,eU:()=>l,fn:()=>k,g1:()=>h,g6:()=>d,iM:()=>g,iU:()=>_,jr:()=>c,nk:()=>y,rr:()=>f,sA:()=>x,sS:()=>u,t_:()=>b,xo:()=>o,ye:()=>T,yy:()=>L});var i=a(963522),n=a(284247);let l=new i.rk(3),s=48,r=56,o="sm",d=500,c=1,m=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),u=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),g="comment_featured_ids",_="did_it_featured_ids",p={NONE:"none",WARNING:"warning",BLOCK:"block"},h="transparent",y="#efefef",f=(e,t)=>e?(0,n.A)(t.ngettext('{{ count }} Comment', '{{ count }} Comments', e, 'closeup.commentThread.heading.commentCount', 'Comment count on a Pin. count: number of comments'),{count:e.toString()}):t._('No comments yet', 'closeup.commentThread.heading.noComments', 'Prompt for user to comment on Pin'),A=e=>e._('Write a comment, share feedback, or give a high-five to get the conversation going', 'emptyCommentThread.noComments.text', 'Text shown when there are no comments yet'),v=(e,t,a,i)=>{let n=t.map(t=>({...t,offset:(t.offset||0)+(i?0:e.length+1),color:"default"}));return i?n:[{offset:0,length:e.length,color:a?"light":"dark"},...n]},T=e=>e._('Insight heading icon', 'closeupCommentModuleHeading.icon', 'Icon displayed in the comment module heading'),E=e=>e._('Post', 'commentComposer.button.post', 'Post new comment'),b=e=>e._('posted a photo', 'comment.preview.text.photo', 'Comment preview text for an image that a user posted'),x=e=>e._('posted a sticker', 'comment.preview.text.sticker', 'Comment preview text for a sticker that a user posted'),I=e=>e._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button'),C=e=>e._('Select a photo', 'photoModal.button.accessibilityLabel', 'Accessibility label for photo modal button'),L=e=>e._('Select a sticker', 'stickerTray.button.accessibilityLabel', 'Accessibility label for sticker tray button'),k=e=>e._('Top Comment', 'closeupCommentModuleHeading.heading.topComment', 'Top Comment heading for the comment module'),D=e=>[I(e),C(e),E(e),L(e),e._('Text editor', 'EditorWithMentions.container', 'Tappable area for the editor container')]},782129(e,t,a){a.d(t,{A:()=>i});let i=e=>e?.url!==void 0},857062(e,t,a){a.d(t,{A:()=>d});var i,n=a(859471);a(825193);var l=a(535273),s=a(125025);let r=(void 0!==i||(i=a(637349)).hash&&"bd2991a5190c2f6977d6f49024eb3318"!==i.hash&&console.error("The definition of 'useGetMainPinImage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function o(e,t){return e&&t?`${e} ${t}w`:null}function d({pinKey:e}){let t=(0,l.A)(r,e),{anyEnabled:a,group:i}=(0,s.A)(),d=(0,n.useMemo)(()=>t?.images_736x||t?.images_564x||t?.images_orig||t?.images_474x||t?.images_236x,[t]),c=(0,n.useMemo)(()=>{if(!t)return;let e=[o(t.images_736x?.url,t.images_736x?.width),o(t.images_1200x?.url,t.images_1200x?.width),{enabled:null,enabled_564x:o(t.images_564x?.url,t.images_564x?.width),enabled_orig:o(t.images_orig?.url,t.images_orig?.width)}[i]].filter(Boolean);return e.length>1?e.join(", "):void 0},[t,i]),m=a?"100cqw":void 0;return(0,n.useMemo)(()=>({mainPinImage:{url:d?.url||"",height:d?.height||1,width:d?.width||1},srcSet:c,srcSizes:m}),[d,c,m])}},125025(e,t,a){a.d(t,{A:()=>s});var i=a(601185),n=a(844255),l=a(971289);let s=({skipExpActivation:e=!1}={})=>{let{checkExperiment:t}=(0,i.A)(),a=(0,l.qJ)(),{isAuthenticated:s}=(0,n._8)();return s&&a?t("closeup_dweb_adaptive_images",{dangerouslySkipActivation:e}):{anyEnabled:!1,group:""}}},378263(e,t,a){a.d(t,{A:()=>n});var i=a(859471);function n(e,t){let a=(0,i.useRef)([]),[n,l]=(0,i.useState)(),[s,r]=(0,i.useReducer)(n??(()=>t),t),o=(0,i.useCallback)(t=>{n?r(t):(a.current.length||e().then(e=>{l(()=>e.default)}),a.current=[...a.current,t])},[e,n]);return(0,i.useEffect)(()=>{n&&(a.current.forEach(r),a.current=[])},[n]),[s,o]}},791117(e,t,a){a.d(t,{nA:()=>A,p$:()=>T,Vc:()=>v});var i=a(859471),n=a(106386),l=a(829597),s=a.n(l),r=a(427471),o=a(987628),d=a(257300),c=a(652567),m=a(33658),u=a(596664);let g={feature_map:Object.freeze({})},_=(e,t)=>{let a={...(0,u.A)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return e&&(0,m.Ay)(e,a)?e:a},p=(e,t)=>{if(e=e||g,"FETCH_COMPLETE"===t.type){let{payload:{resource:a,options:i={}}}=t,{data:n}=t.payload.response.resource_response;if("AggregatedCommentReplyFeedResource"===a||"ApiResource"===a&&i.url===`/v3/aggregated_comments/${i.data?.aggregated_comment}/replies/`||"ApiResource"===a&&i.url===`/v3/aggregated_pin_data/${i.data?.aggregated_pin_data}/comments/`||"DidItCommentsResource"===a){let t=n||[],a=e?t.reduce((t,a)=>(t[a.id]=_(e[a.id],a),t),{}):{};return{...e,...a}}if("UnifiedCommentsResource"===a&&n&&n.length>0){let t=n.filter(e=>"aggregatedcomment"===e.type).reduce((t,a)=>(t[a.id]=_(e?.[a.id],a),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===a&&n&&n.length>0){let t=n.map(e=>e.aggregated_comment).reduce((t,a)=>(a&&(t[a.id??""]=_(e?.[a.id??""],a)),t),{}),a=n.map(e=>e.creator_reply).reduce((t,a)=>(a&&a.id&&(t[a.id]=_(e?.[a.id],a)),t),{});return{...e,...t,...a}}if("ApiResource"===a&&"/v3/aggregated_comments/features/"===i.url&&n&&Object.keys(n).length>0)return{...e,feature_map:n}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:a}}=t;return a.id?{...e,[a.id]:a}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:a}}=t,i={...e};return delete i[a],i}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:a}}=t;return Object.fromEntries(Object.entries(e??{}).filter(e=>e[1].user?.id!==a))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:a}}=t;return{...e,[a.id]:_(e?.[a.id],a)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:a}}=t,i=e?.[a.id],n=i?.reaction_counts[1]||0,l={1:a.reaction_by_me?n+1:n-1},s={...i,reaction_by_me:a.reaction_by_me,reaction_counts:l};return{...e,[a.id]:s}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:a}}=t,i=e?.[a.id],n=i?.helpful_count||0,l=a.marked_helpful_by_me?n+1:n-1,s={...i,marked_helpful_by_me:a.marked_helpful_by_me,helpful_count:l};return{...e,[a.id]:s}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:a}}=t,i={...e?.[a.aggregated_comment_id],highlighted_by_pin_owner:a.is_highlighted};return{...e,[a.aggregated_comment_id]:i}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:a}}}=t;return{...e,feature_map:{...e?.feature_map,...a}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:a,id:i}}=t,n=e?.[i];if(!n)return e;let l={...n,comment_count:n.comment_count+a};return{...e,[i]:l}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:a,tagged_users:i,tags:n,text:l}}=t,s={...e?.[a],tagged_users:i,tags:n,...l?{text:l}:{}};return{...e,[a]:s}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:a,translatedText:i}}=t,n={...e?.[a],translatedText:i};return{...e,[a]:n}}return e};var h=a(562615);let{Provider:y,get:f}=(0,o.A)("AggregatedComments");function A({children:e}){let t=(0,n.d4)(({resources:e})=>e?.UnifiedCommentsResource),a=g;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),i=t?.reduce((e,t)=>(e[t.id]=_(a[t.id],t),e),{});a={...a,...i}});let[l,s]=(0,i.useReducer)(p,a),r=e=>{s({type:"FETCH_COMPLETE",payload:e})};(0,c.jY)("AggregatedCommentReplyFeedResource",r),(0,c.gw)("AggregatedCommentReplyFeedResource",r),(0,c.jY)("ApiResource",r),(0,c.gw)("ApiResource",r),(0,c.jY)("DidItCommentsResource",r),(0,c.gw)("DidItCommentsResource",r),(0,c.jY)("UnifiedCommentsPreviewResource",r),(0,c.gw)("UnifiedCommentsPreviewResource",r),(0,c.jY)("UnifiedCommentsResource",r),(0,c.gw)("UnifiedCommentsResource",r);let o=(0,i.useMemo)(()=>({aggregatedComments:l,dispatch:s}),[l,s]);return(0,h.jsx)(y,{value:o,children:e})}function v(){let{dispatch:e}=f();return(0,i.useMemo)(()=>({aggregatedCommentCreated(t,a){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:a}})},aggregatedCommentDeleted:(t,a)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:a}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:a,detailedReasons:i})=>e?(0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/flag/",urlParams:{aggregated_comment:t},method:"PUT",data:{reason:a,detailed_reasons:i}}):(0,d.A)({url:"/v3/did_it/{user_did_it_data}/flag/",urlParams:{user_did_it_data:t},method:"PUT",data:{reason:a,detailed_reasons:i}}),deleteCommentMention:async t=>{let{resource_response:a}=await (0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/mentions/",urlParams:{aggregated_comment:t},data:{fields:["aggregatedcomment.id","aggregatedcomment.tags","aggregatedcomment.tagged_users()","aggregatedcomment.text"]},method:"DELETE"}),i=a.data;i?.id&&e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:i.id,tagged_users:i.tagged_users??[],tags:i.tags??[],text:i.text??""}})},translateAggregatedComment:async t=>{try{let{resource_response:a}=await (0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/translate/",urlParams:{aggregated_comment:t},method:"GET"}),i=a.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:i}})}catch(a){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:a,orbacSubjectId:i})=>{(0,d.A)({url:`/v3/helpful/1/${t}/`,method:a?"DELETE":"POST",data:i?{orbac_subject_id:i}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!a}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:a,isHighlighted:i})=>{s()(t,"Could not find comment"),s()(a,"Could not find Pin"),await (0,d.A)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:a,highlight:!i}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:a,is_highlighted:!i}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:a,orbacSubjectId:i})=>{(0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/react/",urlParams:{aggregated_comment:t},method:a?"DELETE":"POST",data:{reaction_type:1,...i?{orbac_subject_id:i}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!a}}})},updateAggregatedComment:async({commentId:t,force:a,orbacSubjectId:i,tags:n,text:l})=>{let{resource_response:s}=await r.A.create("AggregatedCommentResource",{commentId:t,force:a,tags:n,text:l,...i?{orbacSubjectId:i}:{}}).callUpdate({showError:!1}),{tagged_users:o}=s.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:o.map(e=>({...e})),tags:JSON.parse(n),text:l}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:a,passcode:i,userConfirmPasscode:n})=>{let{resource_response:l}=await (0,d.A)({url:"/v3/aggregated_comments/features/",method:"PUT",data:{user:t,feature_map:JSON.stringify(a),passcode:i,user_confirm_skip_passcode:n??!1}});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:l.data??Object.freeze({})}}})},updateCommentCount:(t,a)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:a,id:t}})}}),[e])}function T(){let{aggregatedComments:e}=f();return e}},152689(e,t,a){a.d(t,{$:()=>n,S:()=>i});let i={aggregatedComment:"aggregatedComment",didIt:"didIt",pin:"pin"},n={aggregatedComment:"aggregatedcomment",didIt:"userdiditdata",pin:"pin"}},795275(e,t,a){a.d(t,{bM:()=>m,lz:()=>u,vH:()=>g});var i=a(859471),n=a(987628),l=a(652567),s=a(378263),r=a(562615);let o=()=>a.e("54751").then(a.bind(a,639906)),{Provider:d,get:c}=(0,n.A)("NativeEngagements");function m({children:e}){let[t,a]=(0,s.A)(o,[]);(0,l.jY)("NativeInteractionsResource",e=>{a({type:"FETCH_COMPLETE",payload:e})}),(0,l.gw)("NativeInteractionsResource",e=>{a({type:"FETCH_MORE_COMPLETE",payload:e})});let n=(0,i.useMemo)(()=>({dispatch:a,nativeEngagements:t}),[a,t]);return(0,r.jsx)(d,{value:n,children:e})}function u(){let{dispatch:e}=c();return(0,i.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function g(){let{nativeEngagements:e}=c();return e}},225532(e,t,a){a.d(t,{A:()=>M,j:()=>P});var i,n,l,s=a(61163),r=a(859471),o=a(106386);a(825193);var d=a(979638),c=a(963522),m=a(110788),u=a(693154),g=a(535273),_=a(224989),p=a(669897),h=a(923884),y=a(104088),f=a(684540);let A=function({graphQLMutation:e,legacyOperation:t,dataKeyOrStrategy:a}){let i="Strategy"===a.kind?a.strategy:"GraphQL"===(0,y.n)(a.fragmentRef).kind?"GraphQL":"Legacy",[n,l]=(0,r.useState)(!1);switch((0,f.A)(i,()=>(0,p.getFragment)(e).name),i){case"GraphQL":{let[t,a]=(0,_.useMutation)(e);return[(0,r.useCallback)(({variables:e,onCompleted:a,onError:i,updater:n,uploadables:l,optimisticUpdater:s,optimisticResponse:r,configs:o,onUnsubscribe:d})=>{t({variables:e,onCompleted:(e,t)=>{a&&a({kind:"GraphQL",data:e},t)},onError:i,updater:n,uploadables:l,optimisticUpdater:s,optimisticResponse:r,configs:o,onUnsubscribe:d})},[t]),a]}case"Legacy":return[(0,r.useCallback)(e=>{l(!0),t(e.variables).then(t=>{e.onCompleted&&e.onCompleted({kind:"Legacy",data:t},null)}).catch(t=>{e.onError&&e.onError(t)}).finally(()=>{l(!1)})},[t]),n];default:return(0,h.A)(i,"Unknown mode")}};var v=a(601185),T=a(430705),E=a(971289),b=a(168079),x=a(870540),I=a(847753),C=a(791117),L=a(152689),k=a(964788),D=a(702970),S=a(491171),w=a(871481),j=a(562615);let P=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:a,isDesktop:i,isReversed:n=!1,noCache:l=!1,orbacSubjectId:s=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:a,page_size:i?10:25,redux_normalize_feed:!0,is_reversed:n,...s?{orbac_subject_id:s}:{}},noCache:l}),R=(void 0!==i||(i=a(336957)).hash&&"38e173ab2c3107ebc5b3da9f216fac98"!==i.hash&&console.error("The definition of 'CommentThreadContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),M=({isReadOnly:e,pinKey:t,scrollContainer:i,showingCloseupCommentModule:_,viewParameter:p,toggleComposerForReply:h,openMwebOverflowMenu:y})=>{(0,r.useEffect)(()=>{(0,s.A)("CommentThreadContainer","/app/www/comments/CommentThreadContainer.tsx")},[]);let{comment_id:f}=(0,d.g)(),M=(0,o.wA)(),z=(0,E.qJ)(),O=(0,u.A)(),N=(0,v.A)().checkExperiment("web_use_mutation_or_legacy_experiment").anyEnabled,G=(0,g.A)(R,t),F=(G?.aggregatedPinData?.commentCount||0)+(G?.aggregatedPinData?.didItData?.imagesCount||0),K=G?.aggregatedPinData?.entityId,H=G?.closeupAttribution?.entityId,U=G?.closeupAttribution?.username,V=G?.commentsDisabled,B=F>0&&!G?.commentsDisabled,$=!!G?.videos?.videoList,W=G?.entityId,J=G?.pinner?.entityId,Y=G?.storyPinData?.entityId,q=(0,r.useRef)(B),Q=(0,x.A)(),X=(0,I.H7)(O,Q),Z=N?"GraphQL":"Legacy",[ee]=A({dataKeyOrStrategy:{kind:"Strategy",strategy:Z},graphQLMutation:(void 0!==n||(n=a(288361)).hash&&"6abad0b1546231dd9301ca5510fb88f5"!==n.hash&&console.error("The definition of 'CommentThreadContainerLikeMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),legacyOperation:({userDidItData:e})=>(0,D.Vx)({didItDataId:e,orbacSubjectId:X})}),[et]=A({dataKeyOrStrategy:{kind:"Strategy",strategy:Z},graphQLMutation:(void 0!==l||(l=a(677854)).hash&&"e8e5a11ac4f4d2e8c4a2ed9c7ee3c073"!==l.hash&&console.error("The definition of 'CommentThreadContainerUnLikeMutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),legacyOperation:({userDidItData:e})=>(0,D.uy)({didItDataId:e,orbacSubjectId:X})}),ea=(0,T.A)(q.current&&K?P({aggregatedPinDataId:K,featuredCommentIds:f?[f]:[],isDesktop:z}):null),{removeUnauthCommentPinId:ei,unauthCommentPinId:en}=(0,k.m)(),el=(0,C.p$)(),{toggleAggregatedCommentHelpful:es,toggleAggregatedCommentLike:er}=(0,C.Vc)(),eo=(0,w.V_)(),ed=(0,o.d4)(e=>(0,S.A)(e,{aggregatedPinDataId:K,aggregatedComments:el,users:eo})),[ec,em]=(0,r.useState)(void 0);(0,b.A)(()=>{!z&&O.isAuth&&en&&W&&en===W&&ei()}),(0,r.useEffect)(()=>{let e=()=>{let t=!!i&&i.scrollTop+i.clientHeight+10>=i.scrollHeight;ea&&!ea.isFetching&&(ea.isAtEnd?i?.removeEventListener("scroll",e):t&&ea.fetchMore())};return i?.addEventListener("scroll",e),()=>{i?.removeEventListener("scroll",e)}},[ea,i]);let eu=2*(!z&&!V);return(0,j.jsx)(r.Fragment,{children:(0,j.jsx)(c.az,{display:"flex",height:z||V||0!==ed.length?void 0:"100%",marginTop:z?6:eu,width:"100%",children:(0,j.jsx)(m.A,{aggregatedPinDataId:K,closeupAttributionId:H,closeupAttributionUsername:U,comments:ed,commentsDisabled:V,isDesktop:z,isReadOnly:e,isVideo:$,openOverflowMenu:y,parentId:K??"",parentType:L.S.pin,pinId:W,pinnerId:J,reactionListCommentId:ec,showingCloseupCommentModule:_,showReactionListForComment:em,storyPinDataId:Y,toggleHelpful:(e,t,a)=>()=>{a?M((0,D.Jj)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:X})):es({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:X})},toggleLike:(e,t,a)=>()=>{a?t?et({variables:{userDidItData:e},onCompleted:(a,i)=>{a&&!i&&M((0,D.cL)(e,!t))}}):ee({variables:{userDidItData:e},onCompleted:(a,i)=>{a&&!i&&M((0,D.cL)(e,!t))}}):er({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:X})},toggleReplyComposer:h,userAvatarSize:"sm",viewParameter:p})})})}},964788(e,t,a){a.d(t,{M:()=>o,m:()=>r});var i=a(859471),n=a(987628),l=a(562615);let{Provider:s,get:r}=(0,n.A)("Session");function o({children:e}){let[t,a]=(0,i.useState)(void 0),n=(0,i.useCallback)(()=>a(void 0),[]),r=(0,i.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:a,removeUnauthCommentPinId:n}),[t,n]);return(0,l.jsx)(s,{value:r,children:e})}},702970(e,t,a){a.d(t,{uy:()=>d,oF:()=>c,cL:()=>r,Vx:()=>o,Jj:()=>m,bh:()=>g,qY:()=>y,pU:()=>h,OP:()=>_,NB:()=>p});var i=a(257300);let n=["aggregatedpindata.aggregated_stats()","aggregatedpindata.id","pin.aggregated_pin_data()","pin.description","pin.done_by_me","pin.id","pin.images[60x60,136x136]","pin.link_domain()","pin.title","pin.tracking_params","pin.rich_metadata()","userdiditdata.comment_count","userdiditdata.details","userdiditdata.done_at","userdiditdata.id","userdiditdata.images[150x150,200x,550x,750x]","userdiditdata.image_signatures","userdiditdata.like_count","userdiditdata.liked_by_me","userdiditdata.helpful_count","userdiditdata.marked_helpful_by_me","userdiditdata.pin()","userdiditdata.privacy","userdiditdata.recommend_score","userdiditdata.user()","userdiditdata.type","userdiditdata.videos()","domain.official_user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.username","video.id","video.video_list[V_HLSV4]"];var l=a(513010),s=a(504252);function r(e,t){return{type:"USER_DID_IT_DATA_LIKE_TOGGLED",payload:{id:e,liked_by_me:t}}}function o({didItDataId:e,orbacSubjectId:t}){return(0,i.A)({url:"/v3/did_it/{user_did_it_data}/like/",urlParams:{user_did_it_data:e},method:"POST",data:t?{orbac_subject_id:t}:{}})}function d({didItDataId:e,orbacSubjectId:t}){return(0,i.A)({url:"/v3/did_it/{user_did_it_data}/like/",urlParams:{user_did_it_data:e},method:"DELETE",data:t?{orbac_subject_id:t}:{}})}function c({didItDataId:e,isLikedByMe:t,orbacSubjectId:a}){return n=>((0,i.A)({url:"/v3/did_it/{user_did_it_data}/like/",urlParams:{user_did_it_data:e},method:t?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),n(r(e,!t)))}function m({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:a}){return n=>((0,i.A)({url:`/v3/helpful/2/${e}/`,method:t?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),n({type:"USER_DID_IT_DATA_HELPFUL_TOGGLED",payload:{id:e,marked_helpful_by_me:!t}}))}function u(e){return{type:"USER_DID_IT_DATA_DELETE",payload:{id:e}}}function g(e,t){return{type:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}function _({aggregatedPinDataId:e,details:t,fromUnifiedComment:a,image_signatures:r,pin_id:o,username:d,updateParentDidItCount:c}){let m="string"==typeof r?r.split(","):[...r];return r=>(0,i.A)({url:"/v3/did_it/",method:"POST",data:{details:t,image_signatures:m,pin:o,fields:n}}).then(t=>{let i=t.resource_response.data;r({type:"PIN_DID_IT",payload:{id:o,value:!0}}),r({type:"USER_DID_IT_DATA_CREATE",payload:{user_did_it_data:i}}),r((0,l.ZT)({feedId:e,feedType:a?s.A.UNIFIED_COMMENTS:s.A.TRIED_IT_FEED,itemIds:i.id?[i.id]:[],itemType:i.type??"userdiditdata",prepend:!0})),r((0,l.ZT)({feedId:d,feedType:s.A.TRIED_IT_FEED,itemIds:i.id?[i.id]:[],itemType:i.type??"userdiditdata"})),c&&r(g(e,1))},()=>{})}function p({aggregatedPinDataId:e,feedType:t,id:a,isOwnedByMe:n,pinId:r,username:o,updateParentDidItCount:d}){return c=>{(0,i.A)({url:"/v3/did_it/{user_did_it_data}/",urlParams:{user_did_it_data:a},method:"DELETE",data:{pin:r}}).then(()=>{n&&c({type:"PIN_DID_IT",payload:{id:r,value:!1}}),c(u(a)),c((0,l.J6)({feedId:e??"",feedType:t||s.A.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"})),c((0,l.J6)({feedId:o,feedType:s.A.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"})),c((0,l.J6)({feedId:o,feedType:s.A.UNIFIED_COMMENTS,itemIds:e?[e]:[],itemType:"userdiditdata"})),d&&c(g(a,-1))},()=>{})}}function h({id:e,details:t,image_signatures:a,pinId:l}){return s=>{(0,i.A)({url:"/v3/did_it/{user_did_it_data}/",urlParams:{user_did_it_data:e},method:"PUT",data:{details:t,image_signatures:[...a],pin:l,fields:n}}).then(e=>{s({type:"USER_DID_IT_DATA_UPDATE",payload:{user_did_it_data:e.resource_response.data}})},()=>{})}}function y(e,t,a,n,r){return o=>{(0,i.A)({url:"/v3/did_it/{user_did_it_data}/flag/",urlParams:{user_did_it_data:a},method:"PUT",data:{reason:n,detailed_reasons:t,explanation:void 0}}).then(()=>{o(u(a)),e&&o((0,l.J6)({feedId:e,feedType:s.A.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"})),o((0,l.J6)({feedId:r,feedType:s.A.TRIED_IT_FEED,itemIds:[a],itemType:"userdiditdata"}))},()=>{})}}},848991(e,t,a){a.d(t,{t:()=>i});function i(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}},491171(e,t,a){a.d(t,{A:()=>s});var i=a(810972),n=a(504252);let l={},s=(0,i.createSelector)((e,{aggregatedComments:t})=>t,({feeds:e},{aggregatedPinDataId:t})=>e[`${n.A.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,{users:t})=>t??l,(e,t,a,i)=>{let n=new Set;return t?.map(({id:t,type:s})=>{if(n.has(t))return;n.add(t);let r="aggregatedcomment"===s.toLowerCase()?e[t]:a[t];if(!r)return;let o="user"in r&&("string"==typeof r.user?i[r.user]??l:r.user??l);return{...r,user:o??l}}).filter(e=>void 0!==e)||[]})},375430(e){e.exports="https://s2.pinimg.com/webapp/commentHelpful-a6cef66d.svg"},808384(e){e.exports="https://s2.pinimg.com/webapp/commentLoved-d67bd29c.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/75952-805657f590ce0603.mjs.map